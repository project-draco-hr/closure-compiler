{
  String prefix="var g; function f(){";
  String suffix="} f()";
  List<String> expected=ImmutableList.of("f");
  List<String> notExpected=ImmutableList.of();
  checkLocalityOfMarkedCalls(prefix + "" + suffix,expected);
  checkLocalityOfMarkedCalls(prefix + "return 1" + suffix,expected);
  checkLocalityOfMarkedCalls(prefix + "return 1 + 2" + suffix,expected);
  checkLocalityOfMarkedCalls(prefix + "return g" + suffix,notExpected);
  checkLocalityOfMarkedCalls(prefix + "return 1; return 2" + suffix,expected);
  checkLocalityOfMarkedCalls(prefix + "return 1; return g" + suffix,notExpected);
  checkLocalityOfMarkedCalls(prefix + "var a = 1; return a" + suffix,expected);
  checkLocalityOfMarkedCalls(prefix + "var a = 1; a = 2; return a" + suffix,expected);
  checkLocalityOfMarkedCalls(prefix + "var a = 1; a = 2; return a + 1" + suffix,expected);
  checkLocalityOfMarkedCalls(prefix + "var a = (g = 2); return a" + suffix,expected);
  checkLocalityOfMarkedCalls(prefix + "var a = (g = []); return a" + suffix,notExpected);
  checkLocalityOfMarkedCalls(prefix + "return {foo : 1}.foo" + suffix,notExpected);
  checkLocalityOfMarkedCalls(prefix + "var a = {foo : 1}; return a.foo" + suffix,notExpected);
  checkLocalityOfMarkedCalls(prefix + "return externObj" + suffix,notExpected);
  checkLocalityOfMarkedCalls("function inner(x) { x.foo = 3; }" + prefix + "return externObj.foo"+ suffix,notExpected);
}
