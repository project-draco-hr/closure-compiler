{
  test("a = null; b = null; var c = b","var c = b = a = null");
  test("a = null; b = null","b = a = null");
  test("a = undefined; b = undefined","b = a = undefined");
  test("a = 0; b = 0","b=a=0");
  test("a = 'foo'; b = 'foo'","b = a = \"foo\"");
  test("a = c; b = c","b=a=c");
  testSame("a = 0; b = 1");
  testSame("a = \"foo\"; b = \"foox\"");
  test("a = null; a && b;","(a = null)&&b");
  test("a = null; a || b;","(a = null)||b");
  test("a = null; a ? b : c;","(a = null) ? b : c");
  test("a = null; this.foo = null;","this.foo = a = null");
  test("function(){ a = null; return null; }","function(){return a = null}");
  test("a = true; if (a) { foo(); }","if (a = true) { foo() }");
  test("a = true; if (a && a) { foo(); }","if ((a = true) && a) { foo() }");
  test("a = false; if (a) { foo(); }","if (a = false) { foo() }");
  testSame("a = this.foo; a();");
  test("a = b; b = a;","b = a = b");
  testSame("a = b; a.c = a");
  test("this.foo = null; this.bar = null;","this.bar = this.foo = null");
  test("this.foo = null; this.bar = null; this.baz = this.bar","this.baz = this.bar = this.foo = null");
  test("this.foo = null; a = null;","a = this.foo = null");
  test("this.foo = null; a = this.foo;","a = this.foo = null");
  test("a.b.c=null; a=null;","a = a.b.c = null");
  testSame("a = null; a.b.c = null");
  test("(a=b).c = null; this.b = null;","this.b = (a=b).c = null");
  testSame("if(x) a = null; else b = a");
}
