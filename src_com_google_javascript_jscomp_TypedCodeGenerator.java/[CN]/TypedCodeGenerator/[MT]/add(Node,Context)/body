{
  Node parent=n.getParent();
  if (parent != null && (parent.isBlock() || parent.isScript())) {
    if (n.isFunction()) {
      add(getFunctionAnnotation(n));
    }
 else     if (n.isExprResult() && n.getFirstChild().isAssign()) {
      Node rhs=n.getFirstChild().getLastChild();
      add(getTypeAnnotation(rhs));
    }
 else     if (n.isVar() && n.getFirstChild().getFirstChild() != null && n.getFirstChild().getFirstChild().isFunction()) {
      add(getFunctionAnnotation(n.getFirstChild().getFirstChild()));
    }
  }
  super.add(n,context);
}
