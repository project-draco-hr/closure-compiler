{
  Preconditions.checkState(fnNode.isFunction());
  JSType type=fnNode.getJSType();
  if (type == null || type.isUnknownType()) {
    return "";
  }
  FunctionType funType=type.toMaybeFunctionType();
  if (JSType.isEquivalent(type,registry.getNativeType(JSTypeNative.FUNCTION_INSTANCE_TYPE))) {
    return "/** @type {!Function} */\n";
  }
  StringBuilder sb=new StringBuilder("/**\n");
  if (fnNode != null) {
    Node paramNode=NodeUtil.getFunctionParameters(fnNode).getFirstChild();
    for (    Node n : funType.getParameters()) {
      if (paramNode == null) {
        break;
      }
      sb.append(" * ");
      appendAnnotation(sb,"param",getParameterNodeJSDocType(n));
      sb.append(" ").append(paramNode.getString()).append("\n");
      paramNode=paramNode.getNext();
    }
  }
  JSType retType=funType.getReturnType();
  if (retType != null && !retType.isEmptyType() && !funType.isInterface() && !(funType.isConstructor() && retType.isVoidType())) {
    sb.append(" * ");
    appendAnnotation(sb,"return",retType.toAnnotationString());
    sb.append("\n");
  }
  if (funType.isConstructor() || funType.isInterface()) {
    FunctionType superConstructor=funType.getSuperClassConstructor();
    if (superConstructor != null) {
      ObjectType superInstance=funType.getSuperClassConstructor().getInstanceType();
      if (!superInstance.toString().equals("Object")) {
        sb.append(" * ");
        appendAnnotation(sb,"extends",superInstance.toAnnotationString());
        sb.append("\n");
      }
    }
    if (funType.isInterface()) {
      for (      ObjectType interfaceType : funType.getExtendedInterfaces()) {
        sb.append(" * ");
        appendAnnotation(sb,"extends",interfaceType.toAnnotationString());
        sb.append("\n");
      }
    }
    Set<String> interfaces=Sets.newTreeSet();
    for (    ObjectType interfaze : funType.getImplementedInterfaces()) {
      interfaces.add(interfaze.toAnnotationString());
    }
    for (    String interfaze : interfaces) {
      sb.append(" * ");
      appendAnnotation(sb,"implements",interfaze);
      sb.append("\n");
    }
    if (funType.isConstructor()) {
      sb.append(" * @constructor\n");
    }
 else     if (funType.isInterface()) {
      sb.append(" * @interface\n");
    }
  }
  if (!funType.getTemplateTypeMap().getTemplateKeys().isEmpty()) {
    sb.append(" * @template ");
    Joiner.on(",").appendTo(sb,funType.getTemplateTypeMap().getTemplateKeys());
    sb.append("\n");
  }
  sb.append(" */\n");
  return sb.toString();
}
