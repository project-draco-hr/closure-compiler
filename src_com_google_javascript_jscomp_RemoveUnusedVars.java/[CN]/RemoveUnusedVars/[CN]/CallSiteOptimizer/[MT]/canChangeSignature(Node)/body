{
  Definition definition=getFunctionDefinition(function);
  Preconditions.checkState(!definition.isExtern());
  Collection<UseSite> useSites=defFinder.getUseSites(definition);
  for (  UseSite site : useSites) {
    if (!SimpleDefinitionFinder.isCallOrNewSite(site)) {
      return false;
    }
    if (NodeUtil.isFunctionObjectCallOrApply(site.node.getParent())) {
      return false;
    }
    Node nameNode=site.node;
    Collection<Definition> singleSiteDefinitions=defFinder.getDefinitionsReferencedAt(nameNode);
    Preconditions.checkState(singleSiteDefinitions.size() == 1);
    Preconditions.checkState(singleSiteDefinitions.contains(definition));
  }
  return true;
}
