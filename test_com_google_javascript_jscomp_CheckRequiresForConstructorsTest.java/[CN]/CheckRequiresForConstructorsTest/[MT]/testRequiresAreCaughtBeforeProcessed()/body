{
  String js="var foo = {}; var bar = new foo.bar.goo();";
  SourceFile input=SourceFile.fromCode("foo.js",js);
  Compiler compiler=new Compiler();
  CompilerOptions opts=new CompilerOptions();
  opts.setCheckRequires(CheckLevel.WARNING);
  opts.setClosurePass(true);
  Result result=compiler.compile(ImmutableList.<SourceFile>of(),ImmutableList.of(input),opts);
  JSError[] warnings=result.warnings;
  assertNotNull(warnings);
  assertTrue(warnings.length > 0);
  String expectation="'foo.bar.goo' used but not goog.require'd";
  for (  JSError warning : warnings) {
    if (expectation.equals(warning.description)) {
      return;
    }
  }
  fail("Could not find the following warning:" + expectation);
}
