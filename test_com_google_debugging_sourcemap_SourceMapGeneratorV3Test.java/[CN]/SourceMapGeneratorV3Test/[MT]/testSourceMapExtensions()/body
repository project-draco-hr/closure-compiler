{
  SourceMapGeneratorV3 mapper=new SourceMapGeneratorV3();
  mapper.addExtension("x_google_foo",new JsonObject());
  mapper.addExtension("x_google_test",parseJsonObject("{\"number\" : 1}"));
  mapper.addExtension("x_google_array",new JsonArray());
  mapper.addExtension("x_google_int",new Integer(2));
  mapper.addExtension("x_google_str","Some text");
  mapper.removeExtension("x_google_foo");
  StringBuilder out=new StringBuilder();
  mapper.appendTo(out,"out.js");
  assertTrue(mapper.hasExtension("x_google_test"));
  JsonObject sourceMap=parseJsonObject(out.toString());
  assertFalse(sourceMap.has("x_google_foo"));
  assertFalse(sourceMap.has("google_test"));
  assertEquals(1,sourceMap.get("x_google_test").getAsJsonObject().get("number").getAsInt());
  assertEquals(0,sourceMap.get("x_google_array").getAsJsonArray().size());
  assertEquals(2,sourceMap.get("x_google_int").getAsInt());
  assertEquals("Some text",sourceMap.get("x_google_str").getAsString());
}
