{
  GlobalNamespace namespace=new GlobalNamespace(compiler,externs,root);
  Set<String> currentSymbols=Sets.newTreeSet();
  for (  String name : namespace.getNameIndex().keySet()) {
    if (isInterestingSymbol.apply(name)) {
      currentSymbols.add(name);
    }
  }
  String passName=compiler.getLastPassName();
  if (passName == null) {
    passName="[Unknown pass]";
  }
  for (  String sym : currentSymbols) {
    if (!previousSymbolsInTree.contains(sym)) {
      stream.println(String.format("%s: Added by %s",sym,passName));
    }
  }
  for (  String sym : previousSymbolsInTree) {
    if (!currentSymbols.contains(sym)) {
      stream.println(String.format("%s: Removed by %s",sym,passName));
    }
  }
  previousSymbolsInTree=currentSymbols;
}
