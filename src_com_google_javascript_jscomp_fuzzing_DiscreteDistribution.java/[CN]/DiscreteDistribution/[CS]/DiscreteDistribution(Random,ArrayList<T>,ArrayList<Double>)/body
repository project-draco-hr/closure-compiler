{
  this.random=random;
  this.items=items;
  this.weights=weights;
  double sum=0;
  for (  Double w : weights) {
    Preconditions.checkArgument(w >= 0);
    Preconditions.checkArgument(!Double.isInfinite(w));
    Preconditions.checkArgument(!Double.isNaN(w));
    sum+=w;
  }
  for (int i=0; i < weights.size(); i++) {
    weights.set(i,weights.get(i) / sum);
  }
}
