{
  if (data == null) {
    throw new FileNotFoundException(path);
  }
  int nameStart=path.lastIndexOf('/');
  if (nameStart < 0) {
    nameStart=0;
  }
 else {
    ++nameStart;
  }
  int nameEnd=path.lastIndexOf('.');
  if (nameEnd < nameStart) {
    nameEnd=path.length();
  }
  String name=path.substring(nameStart,nameEnd);
  try {
    GeneratedClassLoader loader=SecurityController.createLoader(cx.getApplicationClassLoader(),securityDomain);
    Class<?> clazz=loader.defineClass(name,data);
    loader.linkClass(clazz);
    if (!Script.class.isAssignableFrom(clazz)) {
      throw Context.reportRuntimeError("msg.must.implement.Script");
    }
    return (Script)clazz.newInstance();
  }
 catch (  IllegalAccessException iaex) {
    Context.reportError(iaex.toString());
    throw new RuntimeException(iaex);
  }
catch (  InstantiationException inex) {
    Context.reportError(inex.toString());
    throw new RuntimeException(inex);
  }
}
