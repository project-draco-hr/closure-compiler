{
  if (name.contains(".")) {
    QualifiedName qname=QualifiedName.fromQname(name);
    Namespace ns=getNamespace(qname.getLeftmostName());
    if (ns == null) {
      return getUnresolvedTypeByName(name);
    }
    RawNominalType rawType=ns.getNominalType(qname.getAllButLeftmost());
    if (rawType == null) {
      return getUnresolvedTypeByName(name);
    }
    return rawType.getInstanceAsJSType();
  }
  if (declaredType != null && declaredType.isTypeVariableInScope(name)) {
    return JSType.fromTypeVar(name);
  }
  RawNominalType rawNominalType=localClassDefs.get(name);
  if (rawNominalType != null) {
    return rawNominalType.getInstanceAsJSType();
  }
  JSType t=getUnresolvedTypeByName(name);
  if (t != null) {
    return t;
  }
  return parent == null ? null : parent.lookupTypeByName(name);
}
