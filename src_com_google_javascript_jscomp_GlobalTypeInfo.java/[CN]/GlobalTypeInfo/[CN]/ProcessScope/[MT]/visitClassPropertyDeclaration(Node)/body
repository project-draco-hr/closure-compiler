{
  Preconditions.checkArgument(getProp.isGetProp());
  JSType t=currentScope.getDeclaredFunctionType().getThisType();
  NominalType thisType=t == null ? null : t.getNominalTypeIfSingletonObj();
  if (thisType == null) {
    return;
  }
  RawNominalType rawNominalType=thisType.getRawNominalType();
  String pname=getProp.getLastChild().getString();
  JSType declType=getDeclaredTypeOfNode(NodeUtil.getBestJSDocInfo(getProp),currentScope);
  boolean isConst=isConst(getProp);
  if (declType != null || isConst) {
    mayWarnAboutExistingProp(rawNominalType,pname,getProp,declType);
    if (declType == null) {
      declType=mayInferFromRhsIfConst(getProp);
    }
    if (mayAddPropToType(getProp,rawNominalType)) {
      rawNominalType.addClassProperty(pname,getProp,declType,isConst);
    }
    if (isConst) {
      getProp.putBooleanProp(Node.CONSTANT_PROPERTY_DEF,true);
    }
  }
 else   if (mayAddPropToType(getProp,rawNominalType)) {
    rawNominalType.addUndeclaredClassProperty(pname,getProp);
  }
  if (!propertyDefs.contains(rawNominalType,pname)) {
    propertyDefs.put(rawNominalType,pname,new PropertyDef(getProp,null,null));
  }
}
