{
  Preconditions.checkArgument(getProp.isGetProp());
  JSType t=currentScope.getDeclaredFunctionType().getThisType();
  NominalType thisType=t == null ? null : t.getNominalTypeIfSingletonObj();
  if (thisType == null) {
    return;
  }
  RawNominalType rawType=thisType.getRawNominalType();
  String pname=getProp.getLastChild().getString();
  Node parent=getProp.getParent();
  Node initializer=parent.isAssign() ? parent.getLastChild() : null;
  JSDocInfo jsdoc=NodeUtil.getBestJSDocInfo(getProp);
  JSType propDeclType=null;
  if (initializer != null && initializer.isFunction()) {
    parent.putBooleanProp(Node.ANALYZED_DURING_GTI,true);
    DeclaredFunctionType dft=visitFunctionLate(initializer,rawType).getDeclaredFunctionType();
    propDeclType=commonTypes.fromFunctionType(dft.toFunctionType());
  }
  if (jsdoc != null && jsdoc.hasType()) {
    propDeclType=getDeclaredTypeOfNode(jsdoc,currentScope);
  }
  boolean isConst=isConst(getProp);
  if (propDeclType != null || isConst) {
    mayWarnAboutExistingProp(rawType,pname,getProp,propDeclType);
    if (propDeclType == null) {
      propDeclType=mayInferFromRhsIfConst(getProp);
    }
    if (mayAddPropToType(getProp,rawType)) {
      rawType.addClassProperty(pname,getProp,propDeclType,isConst);
    }
    if (isConst) {
      getProp.putBooleanProp(Node.CONSTANT_PROPERTY_DEF,true);
    }
  }
 else   if (mayAddPropToType(getProp,rawType)) {
    rawType.addUndeclaredClassProperty(pname,getProp);
  }
  if (!propertyDefs.contains(rawType,pname)) {
    propertyDefs.put(rawType,pname,new PropertyDef(getProp,null,null));
  }
}
