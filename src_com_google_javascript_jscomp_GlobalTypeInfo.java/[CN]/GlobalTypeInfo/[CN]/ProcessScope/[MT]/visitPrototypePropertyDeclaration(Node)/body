{
  Node expr=exprResult.getFirstChild();
  Node getPropNode, initializer;
  if (expr.isAssign()) {
    getPropNode=expr.getFirstChild();
    initializer=expr.getLastChild();
  }
 else {
    getPropNode=expr;
    initializer=null;
  }
  Node ctorNameNode=NodeUtil.getPrototypeClassName(getPropNode);
  String ctorName=ctorNameNode.getQualifiedName();
  if (currentScope.isDefinedLocally(ctorName)) {
    RawNominalType rawNominalType=currentScope.getLocalNominalType(ctorName);
    if (rawNominalType == null) {
      return;
    }
    String pname=NodeUtil.getPrototypePropertyName(getPropNode);
    JSType propDeclType;
    Scope methodScope=null;
    if (initializer != null && initializer.isFunction()) {
      methodScope=visitFunctionDef(initializer,rawNominalType);
      propDeclType=JSType.fromFunctionType(methodScope.getDeclaredType().toFunctionType());
    }
 else {
      propDeclType=typeParser.getNodeTypeDeclaration(expr.getJSDocInfo(),rawNominalType,currentScope);
    }
    propertyDefs.put(rawNominalType.getId(),pname,new PropertyDef(expr,methodScope));
    if (propDeclType != null) {
      if (mayWarnAboutExistingProp(rawNominalType,pname,expr)) {
        return;
      }
      rawNominalType.addProtoProperty(pname,propDeclType);
    }
 else {
      rawNominalType.addUndeclaredProtoProperty(pname);
    }
  }
 else {
    warnings.add(JSError.make(expr,CTOR_IN_DIFFERENT_SCOPE));
  }
}
