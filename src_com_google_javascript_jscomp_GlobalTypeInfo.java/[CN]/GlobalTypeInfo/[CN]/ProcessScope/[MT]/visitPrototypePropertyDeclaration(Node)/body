{
  Preconditions.checkArgument(getProp.isGetProp());
  Node parent=getProp.getParent();
  Node initializer=parent.isAssign() ? parent.getLastChild() : null;
  Node ctorNameNode=NodeUtil.getPrototypeClassName(getProp);
  String ctorName=ctorNameNode.getQualifiedName();
  if (!currentScope.isDefinedLocally(ctorName)) {
    warnings.add(JSError.make(getProp,CTOR_IN_DIFFERENT_SCOPE));
    return;
  }
  RawNominalType rawType=currentScope.getLocalNominalType(ctorName);
  if (rawType == null) {
    return;
  }
  String pname=NodeUtil.getPrototypePropertyName(getProp);
  JSType propDeclType;
  Scope methodScope=null;
  if (initializer != null && initializer.isFunction()) {
    methodScope=visitFunctionDef(initializer,rawType);
    propDeclType=JSType.fromFunctionType(methodScope.getDeclaredType().toFunctionType());
  }
 else {
    propDeclType=typeParser.getNodeTypeDeclaration(NodeUtil.getBestJSDocInfo(getProp),rawType,currentScope);
  }
  propertyDefs.put(rawType.getId(),pname,new PropertyDef(getProp,methodScope));
  if (propDeclType != null) {
    if (mayWarnAboutExistingProp(rawType,pname,getProp)) {
      return;
    }
    rawType.addProtoProperty(pname,propDeclType);
  }
 else {
    rawType.addUndeclaredProtoProperty(pname);
  }
}
