{
  Preconditions.checkArgument(fn.isFunction());
  Scope fnScope=computeFnDeclaredType(fn,currentScope);
  scopes.addFirst(fnScope);
  String fnName=getFunInternalName(fn);
  if (TypeUtils.isIdentifier(fnName)) {
    if (currentScope.isDefinedLocally(fnName)) {
      warnings.add(JSError.make(fn,VariableReferenceCheck.REDECLARED_VARIABLE,fnName));
    }
 else {
      currentScope.putLocalFunDef(fnName,fnScope);
    }
  }
  undeclaredVars.removeAll(fnName);
  scopeWorkset.add(fnScope);
  return fnScope;
}
