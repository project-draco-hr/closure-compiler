{
  Scope methodScope;
  DeclaredFunctionType methodType;
  JSType propDeclType;
  if (initializer != null && initializer.isFunction()) {
    if (initializer.getLastChild().hasChildren() && rawType.isInterface()) {
      warnings.add(JSError.make(initializer.getLastChild(),TypeCheck.INTERFACE_METHOD_NOT_EMPTY));
    }
    methodScope=visitFunctionLate(initializer,rawType);
    methodType=methodScope.getDeclaredType();
    propDeclType=commonTypes.fromFunctionType(methodType.toFunctionType());
  }
 else {
    JSDocInfo jsdoc=NodeUtil.getBestJSDocInfo(defSite);
    if (jsdoc != null && jsdoc.containsFunctionDeclaration()) {
      methodScope=null;
      methodType=computeFnDeclaredType(jsdoc,pname,defSite,rawType,currentScope);
      propDeclType=commonTypes.fromFunctionType(methodType.toFunctionType());
    }
 else     if (jsdoc != null && jsdoc.hasType()) {
      methodScope=null;
      methodType=null;
      propDeclType=typeParser.getNodeTypeDeclaration(jsdoc,rawType,currentScope);
    }
 else {
      methodScope=null;
      methodType=null;
      propDeclType=null;
    }
  }
  propertyDefs.put(rawType,pname,new PropertyDef(defSite,methodType,methodScope));
  boolean isConst=isConst(defSite);
  if (propDeclType != null || isConst) {
    if (mayWarnAboutExistingProp(rawType,pname,defSite,propDeclType)) {
      return;
    }
    if (defSite.isGetProp() && propDeclType == null && isConst && !mayWarnAboutNoInit(defSite)) {
      propDeclType=inferConstTypeFromRhs(defSite);
    }
    rawType.addProtoProperty(pname,propDeclType,isConst);
    if (defSite.isGetProp()) {
      defSite.putBooleanProp(Node.ANALYZED_DURING_GTI,true);
      if (isConst) {
        defSite.putBooleanProp(Node.CONSTANT_PROPERTY_DEF,true);
      }
    }
  }
 else {
    rawType.addUndeclaredProtoProperty(pname);
  }
}
