{
  Preconditions.checkArgument(getProp.isGetProp());
  Preconditions.checkArgument(getProp.isQualifiedName());
  if (isAnnotatedAsConst(getProp)) {
    warnings.add(JSError.make(getProp,MISPLACED_CONST_ANNOTATION));
  }
  QualifiedName recvQname=QualifiedName.fromNode(getProp.getFirstChild());
  Declaration d=this.currentScope.getDeclaration(recvQname,false);
  if (d == null) {
    return;
  }
  if (d.getTypedef() != null) {
    warnings.add(JSError.make(getProp,CANNOT_ADD_PROPERTIES_TO_TYPEDEF));
    getProp.getParent().putBooleanProp(Node.ANALYZED_DURING_GTI,true);
    return;
  }
  JSType recvType=d.getTypeOfSimpleDecl();
  if (recvType == null) {
    return;
  }
  NominalType nt=recvType.getNominalTypeIfSingletonObj();
  if (nt == null || nt.equals(commonTypes.getObjectType())) {
    return;
  }
  RawNominalType rawType=nt.getRawNominalType();
  String pname=getProp.getLastChild().getString();
  JSType declType=getDeclaredTypeOfNode(NodeUtil.getBestJSDocInfo(getProp),currentScope);
  if (declType != null) {
    declType=declType.substituteGenericsWithUnknown();
    if (mayWarnAboutExistingProp(rawType,pname,getProp,declType)) {
      return;
    }
    rawType.addPropertyWhichMayNotBeOnAllInstances(pname,declType);
  }
 else   if (!rawType.mayHaveProp(pname)) {
    rawType.addPropertyWhichMayNotBeOnAllInstances(pname,null);
  }
}
