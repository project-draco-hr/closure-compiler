{
  Preconditions.checkArgument(fn.isFunction());
  String fnName=NodeUtil.getFunctionName(fn);
  if (fnName != null && !fnName.contains(".")) {
    undeclaredVars.removeAll(fnName);
  }
  String internalName=getFunInternalName(fn);
  Scope fnScope=currentScope.getScope(internalName);
  updateFnScope(fnScope,ownerType);
  return fnScope;
}
