{
  List<JSSourceFile> inputs=new ArrayList<JSSourceFile>(files.size());
  boolean usingStdin=false;
  for (  String filename : files) {
    if (!"-".equals(filename)) {
      JSSourceFile newFile=JSSourceFile.fromFile(filename,inputCharset);
      inputs.add(newFile);
    }
 else {
      if (!allowStdIn) {
        throw new FlagUsageException("Can't specify stdin.");
      }
      if (usingStdin) {
        throw new FlagUsageException("Can't specify stdin twice.");
      }
      inputs.add(JSSourceFile.fromInputStream("stdin",System.in));
      usingStdin=true;
      if (!config.outputManifests.isEmpty()) {
        throw new FlagUsageException("Manifest files cannot be generated " + "when the input is from stdin.");
      }
      if (!config.outputBundles.isEmpty()) {
        throw new FlagUsageException("Bundle files cannot be generated " + "when the input is from stdin.");
      }
    }
  }
  return inputs;
}
