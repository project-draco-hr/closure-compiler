{
  CompilerEnvirons environment=new CompilerEnvirons();
  TestErrorReporter testErrorReporter=new TestErrorReporter(null,warnings);
  environment.setErrorReporter(testErrorReporter);
  environment.setParseJSDoc(true);
  environment.setParseJSDocDocumentation(true);
  Parser p=new Parser(environment,testErrorReporter,registry);
  Node script=p.parse(string,null,0);
  assertTrue(testErrorReporter.hasEncounteredAllErrors());
  assertTrue(testErrorReporter.hasEncounteredAllWarnings());
  return script;
}
