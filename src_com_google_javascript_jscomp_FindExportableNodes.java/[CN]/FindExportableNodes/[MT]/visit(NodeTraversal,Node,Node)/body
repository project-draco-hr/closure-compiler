{
  JSDocInfo docInfo=n.getJSDocInfo();
  if (docInfo != null && docInfo.isExport()) {
    String export=null;
    GenerateNodeContext context=null;
switch (n.getType()) {
case Token.FUNCTION:
      if (parent.getType() == Token.SCRIPT) {
        export=NodeUtil.getFunctionName(n,parent);
        context=new GenerateNodeContext(n,parent,n);
      }
    break;
case Token.ASSIGN:
  Node grandparent=parent.getParent();
if (grandparent != null && grandparent.getType() == Token.SCRIPT && parent.getType() == Token.EXPR_RESULT && n.getLastChild().getType() != Token.ASSIGN) {
  export=n.getFirstChild().getQualifiedName();
  context=new GenerateNodeContext(n,grandparent,parent);
}
break;
case Token.VAR:
if (parent.getType() == Token.SCRIPT) {
if (n.getFirstChild().hasChildren() && n.getFirstChild().getFirstChild().getType() != Token.ASSIGN) {
export=n.getFirstChild().getString();
context=new GenerateNodeContext(n,parent,n);
}
}
}
if (export != null) {
exports.put(export,context);
}
 else {
compiler.report(t.makeError(n,NON_GLOBAL_ERROR));
}
}
}
