{
  type=type.restrictByNotNullOrUndefined();
  if (type instanceof UnionType) {
    for (    JSType alt : ((UnionType)type).getAlternates()) {
      addInvalidatingType(alt);
    }
  }
 else   if (type instanceof EnumElementType) {
    addInvalidatingType(((EnumElementType)type).getPrimitiveType());
  }
 else {
    typeSystem.addInvalidatingType(type);
    ObjectType objType=ObjectType.cast(type);
    if (objType != null && objType.getImplicitPrototype() != null) {
      typeSystem.addInvalidatingType(objType.getImplicitPrototype());
    }
  }
}
