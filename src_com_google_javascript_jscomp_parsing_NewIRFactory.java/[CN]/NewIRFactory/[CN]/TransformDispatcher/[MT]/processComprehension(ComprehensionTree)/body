{
  maybeWarnEs6Feature(tree,"array/generator comprehensions");
  int type;
switch (tree.type) {
case ARRAY:
    type=Token.ARRAY_COMP;
  break;
case GENERATOR:
type=Token.GENERATOR_COMP;
break;
default :
throw new IllegalStateException("unreachable");
}
Node node=newNode(type);
for (ParseTree child : tree.children) {
node.addChildToBack(transform(child));
}
node.addChildToBack(transform(tree.tailExpression));
return node;
}
