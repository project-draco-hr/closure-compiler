{
  Node value=init.getAssignedValue();
  Preconditions.checkState(value != null);
  boolean isFunctionDeclaration=NodeUtil.isFunctionDeclaration(value);
  inlineValue(v,reference,value.detachFromParent());
  if (declaration != init) {
    Node expressRoot=init.getGrandparent();
    Preconditions.checkState(expressRoot.getType() == Token.EXPR_RESULT);
    NodeUtil.removeChild(expressRoot.getParent(),expressRoot);
  }
  if (!isFunctionDeclaration) {
    removeDeclaration(declaration);
  }
 else {
    compiler.reportCodeChange();
  }
}
