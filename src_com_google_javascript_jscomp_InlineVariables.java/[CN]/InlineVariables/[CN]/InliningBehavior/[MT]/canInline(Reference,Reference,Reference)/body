{
  if (!isValidDeclaration(declaration) || !isValidInitialization(initialization) || !isValidReference(reference)) {
    return false;
  }
  if (declaration != initialization && !initialization.getGrandparent().isExprResult()) {
    return false;
  }
  if (declaration.getBasicBlock() != initialization.getBasicBlock() || declaration.getBasicBlock() != reference.getBasicBlock()) {
    return false;
  }
  Node value=initialization.getAssignedValue();
  Preconditions.checkState(value != null);
  if (value.isGetProp() && reference.getParent().isCall() && reference.getParent().getFirstChild() == reference.getNode()) {
    return false;
  }
  if (value.isFunction()) {
    Node callNode=reference.getParent();
    if (reference.getParent().isCall()) {
      SubclassRelationship relationship=compiler.getCodingConvention().getClassesDefinedByCall(callNode);
      if (relationship != null) {
        return false;
      }
    }
  }
  return canMoveAggressively(value) || canMoveModerately(initialization,reference);
}
