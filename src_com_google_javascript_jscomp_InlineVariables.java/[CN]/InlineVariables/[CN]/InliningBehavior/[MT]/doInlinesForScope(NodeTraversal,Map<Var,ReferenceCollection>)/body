{
  for (Iterator<Var> it=t.getScope().getVars(); it.hasNext(); ) {
    Var v=it.next();
    ReferenceCollection referenceInfo=referenceMap.get(v);
    if (referenceInfo == null || isVarInlineForbidden(v) || staleVars.contains(v)) {
      continue;
    }
 else     if (isInlineableDeclaredConstant(v,referenceInfo)) {
      Reference init=referenceInfo.getInitializingReferenceForConstants();
      Node value=init.getAssignedValue();
      inlineDeclaredConstant(v,value,referenceInfo.references);
      staleVars.add(v);
    }
 else     if (onlyConstants) {
      continue;
    }
 else {
      inlineNonConstants(v,referenceInfo);
    }
  }
}
