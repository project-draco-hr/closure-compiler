{
  Node varNode=decl.getParent();
  Node grandparent=decl.getGrandparent();
  compiler.reportChangeToEnclosingScope(decl.getNode());
  if (!NodeUtil.isBlockScopedDeclaration(decl.getNode())) {
    decl.getScope().getClosestHoistScope().undeclare(decl.getSymbol());
  }
  varNode.removeChild(decl.getNode());
  if (!varNode.hasChildren()) {
    Preconditions.checkState(varNode.isVar());
    NodeUtil.removeChild(grandparent,varNode);
  }
}
