{
  DefinitionProvider definitionProvider=null;
  if (useNameReferenceGraph) {
    NameReferenceGraphConstruction graphBuilder=new NameReferenceGraphConstruction(compiler);
    graphBuilder.process(externs,root);
    definitionProvider=graphBuilder.getNameReferenceGraph();
  }
 else {
    SimpleDefinitionFinder defFinder=new SimpleDefinitionFinder(compiler);
    defFinder.process(externs,root);
    definitionProvider=defFinder;
  }
  PureFunctionIdentifier pureFunctionIdentifier=new PureFunctionIdentifier(compiler,definitionProvider);
  pureFunctionIdentifier.process(externs,root);
  if (reportPath != null) {
    try {
      Files.write(pureFunctionIdentifier.getDebugReport(),new File(reportPath),UTF_8);
    }
 catch (    IOException e) {
      throw new RuntimeException(e);
    }
  }
}
