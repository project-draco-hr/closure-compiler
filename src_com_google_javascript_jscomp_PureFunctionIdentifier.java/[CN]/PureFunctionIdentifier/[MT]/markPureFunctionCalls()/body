{
  for (  Node callNode : allFunctionCalls) {
    Node name=callNode.getFirstChild();
    Collection<Definition> defs=getCallableDefinitions(definitionProvider,name);
    Node.SideEffectFlags flags=new Node.SideEffectFlags();
    if (defs == null) {
      flags.setMutatesGlobalState();
      flags.setThrows();
      flags.setReturnsTainted();
    }
 else {
      flags.clearAllFlags();
      for (      Definition def : defs) {
        FunctionSideEffectData functionInfo=functionSideEffectMap.get(def.getRValue());
        Preconditions.checkNotNull(functionInfo);
        if (functionInfo.mutatesGlobalState()) {
          flags.setMutatesGlobalState();
        }
        if (functionInfo.functionThrows()) {
          flags.setThrows();
        }
        if (!NodeUtil.isNew(callNode)) {
          if (functionInfo.mutatesThis()) {
            flags.setMutatesThis();
          }
        }
        if (functionInfo.hasNonLocalReturnValue()) {
          flags.setReturnsTainted();
        }
        if (flags.areAllFlagsSet()) {
          break;
        }
      }
    }
    if (NodeUtil.isCall(callNode)) {
      Preconditions.checkState(compiler != null);
      if (!NodeUtil.functionCallHasSideEffects(callNode,compiler)) {
        flags.clearSideEffectFlags();
      }
    }
 else     if (NodeUtil.isNew(callNode)) {
      if (!NodeUtil.constructorCallHasSideEffects(callNode)) {
        flags.clearSideEffectFlags();
      }
    }
    callNode.setSideEffectFlags(flags.valueOf());
  }
}
