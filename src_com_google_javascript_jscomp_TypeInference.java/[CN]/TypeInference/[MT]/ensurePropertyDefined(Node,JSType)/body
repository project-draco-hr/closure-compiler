{
  ObjectType objectType=ObjectType.cast(getJSType(getprop.getFirstChild()).restrictByNotNullOrUndefined());
  if (objectType != null) {
    if (ensurePropertyDeclaredHelper(getprop,objectType)) {
      return;
    }
    String propName=getprop.getLastChild().getString();
    if (!objectType.isPropertyTypeDeclared(propName)) {
      if (objectType.hasProperty(propName) || !objectType.isInstanceType()) {
        if ("prototype".equals(propName)) {
          objectType.defineDeclaredProperty(propName,rightType,false);
        }
 else {
          objectType.defineInferredProperty(propName,rightType,false);
        }
      }
 else {
        if (getprop.getFirstChild().getType() == Token.THIS && getJSType(syntacticScope.getRootNode()).isConstructor()) {
          objectType.defineInferredProperty(propName,rightType,false);
        }
 else {
          registry.registerPropertyOnType(propName,objectType);
        }
      }
    }
  }
}
