{
  String propName=getprop.getLastChild().getString();
  Node obj=getprop.getFirstChild();
  JSType nodeType=getJSType(obj);
  ObjectType objectType=ObjectType.cast(nodeType.restrictByNotNullOrUndefined());
  if (objectType == null) {
    registry.registerPropertyOnType(propName,nodeType);
  }
 else {
    if (nodeType.isStruct() && !objectType.hasProperty(propName)) {
      if (!(obj.isThis() && getJSType(syntacticScope.getRootNode()).isConstructor())) {
        return;
      }
    }
    if (ensurePropertyDeclaredHelper(getprop,objectType)) {
      return;
    }
    if (!objectType.isPropertyTypeDeclared(propName)) {
      if (objectType.hasProperty(propName) || !objectType.isInstanceType()) {
        if ("prototype".equals(propName)) {
          objectType.defineDeclaredProperty(propName,rightType,getprop);
        }
 else {
          objectType.defineInferredProperty(propName,rightType,getprop);
        }
      }
 else       if (obj.isThis() && getJSType(syntacticScope.getRootNode()).isConstructor()) {
        objectType.defineInferredProperty(propName,rightType,getprop);
      }
 else {
        registry.registerPropertyOnType(propName,objectType);
      }
    }
  }
}
