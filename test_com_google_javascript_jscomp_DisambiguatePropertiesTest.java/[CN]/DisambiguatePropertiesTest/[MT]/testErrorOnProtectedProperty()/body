{
  String js="function addSingletonGetter(foo) { foo.foobar = 'a'; };";
  Compiler compiler=new Compiler();
  CompilerOptions options=new CompilerOptions();
  compiler.init(new JSSourceFile[]{JSSourceFile.fromCode("externs","")},new JSSourceFile[]{JSSourceFile.fromCode("testcode",js)},options);
  Node root=compiler.parseInputs();
  Node externsRoot=root.getFirstChild();
  Node mainRoot=externsRoot.getNext();
  getProcessor(compiler).process(externsRoot,mainRoot);
  assertEquals(1,compiler.getErrors().length);
  assertTrue(compiler.getErrors()[0].toString().contains("foobar"));
}
