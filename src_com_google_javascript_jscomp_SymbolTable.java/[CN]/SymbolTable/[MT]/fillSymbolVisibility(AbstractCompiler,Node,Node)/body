{
  CollectFileOverviewVisibility collectPass=new CollectFileOverviewVisibility(compiler);
  collectPass.process(externs,root);
  ImmutableMap<StaticSourceFile,Visibility> visibilityMap=collectPass.getFileOverviewVisibilityMap();
  NodeTraversal.traverseRoots(compiler,Lists.newArrayList(externs,root),new VisibilityCollector(visibilityMap,compiler.getCodingConvention()));
}
