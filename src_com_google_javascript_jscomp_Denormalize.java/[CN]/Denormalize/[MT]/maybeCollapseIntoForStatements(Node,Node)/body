{
  if (parent == null || !NodeUtil.isStatementBlock(parent)) {
    return;
  }
  if (!NodeUtil.isExpressionNode(n) && !NodeUtil.isVar(n)) {
    return;
  }
  Node nextSibling=n.getNext();
  if (nextSibling != null && nextSibling.getType() == Token.FOR && !NodeUtil.isForIn(nextSibling) && nextSibling.getFirstChild().getType() == Token.EMPTY) {
    if (NodeUtil.containsType(n,Token.IN)) {
      return;
    }
    Node forNode=nextSibling;
    Node oldInitializer=forNode.getFirstChild();
    parent.removeChild(n);
    Node newInitializer;
    if (NodeUtil.isVar(n)) {
      newInitializer=n;
    }
 else {
      Preconditions.checkState(n.hasOneChild());
      newInitializer=n.getFirstChild();
      n.removeChild(newInitializer);
    }
    forNode.replaceChild(oldInitializer,newInitializer);
    compiler.reportCodeChange();
  }
}
