{
  int pLine=position.getLineNumber();
  int pChar=position.getCharacterIndex();
  if (position.getLineNumber() == lineIndex) {
    if (position.getCharacterIndex() >= characterPosition) {
      pLine++;
      pChar-=characterPosition;
    }
  }
  if (position.getLineNumber() > lineIndex) {
    pLine++;
  }
  return new Position(pLine,pChar);
}
