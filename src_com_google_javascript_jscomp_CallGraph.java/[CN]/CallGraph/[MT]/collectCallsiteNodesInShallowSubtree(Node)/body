{
  final Collection<Node> callsites=Sets.newLinkedHashSet();
  NodeTraversal.traverse(compiler,subtree,new AbstractShallowCallback(){
    @Override public void visit(    NodeTraversal t,    Node potentialCallsite,    Node parent){
      int nodeType=potentialCallsite.getType();
      if (nodeType == Token.CALL || nodeType == Token.NEW) {
        callsites.add(potentialCallsite);
      }
    }
  }
);
  return callsites;
}
