{
  Collection<Function> functions=Collections2.filter(getAllFunctions(),new Predicate<Function>(){
    @Override public boolean apply(    Function function){
      String functionName=function.getName();
      if (functionName != null && desiredName != null) {
        return desiredName.equals(functionName);
      }
 else {
        return desiredName == functionName;
      }
    }
  }
);
  if (functions.size() == 1) {
    return functions.iterator().next();
  }
 else {
    throw new IllegalStateException("Found " + functions.size() + " functions with name "+ desiredName);
  }
}
