{
  this.compiler=compiler;
  this.moduleGraph=moduleGraph;
  if (!Strings.isEmpty(unaliasableGlobals) && !Strings.isEmpty(aliasableGlobals)) {
    throw new IllegalArgumentException("Cannot pass in both unaliasable and aliasable globals; you must " + "choose one or the other.");
  }
  if (!Strings.isEmpty(unaliasableGlobals)) {
    this.unaliasableGlobals.addAll(Arrays.asList(unaliasableGlobals.split(",")));
  }
  if (!Strings.isEmpty(aliasableGlobals)) {
    this.aliasableGlobals.addAll(Arrays.asList(aliasableGlobals.split(",")));
  }
  if (moduleGraph != null) {
    moduleRoots=Maps.newHashMap();
  }
}
