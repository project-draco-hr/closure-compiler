{
  if (topScope == null) {
    typedScopeCreator=new MemoizedScopeCreator(new TypedScopeCreator(compiler));
    topScope=typedScopeCreator.createScope(root.getParent(),null);
  }
 else {
    compiler.getTypeRegistry().resolveTypesInScope(topScope);
  }
}
