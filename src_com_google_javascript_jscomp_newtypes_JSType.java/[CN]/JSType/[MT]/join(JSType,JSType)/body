{
  if (lhs.isTop() || rhs.isTop()) {
    return TOP;
  }
 else   if (lhs.isUnknown() || rhs.isUnknown()) {
    return UNKNOWN;
  }
 else   if (lhs.isBottom()) {
    return rhs;
  }
 else   if (rhs.isBottom()) {
    return lhs;
  }
  if (lhs.getTypeVar() != null && rhs.getTypeVar() != null && !lhs.getTypeVar().equals(rhs.getTypeVar())) {
    return UNKNOWN;
  }
  int newMask=lhs.getMask() | rhs.getMask();
  String newLoc=joinLocs(lhs.getLocation(),rhs.getLocation());
  ImmutableSet<ObjectType> newObjs=ObjectType.joinSets(lhs.getObjs(),rhs.getObjs());
  String newTypevar=lhs.getTypeVar() != null ? lhs.getTypeVar() : rhs.getTypeVar();
  ImmutableSet<EnumType> newEnums=EnumType.union(lhs.getEnums(),rhs.getEnums());
  if (newEnums == null) {
    return makeType(newMask,newLoc,newObjs,newTypevar,null);
  }
  JSType tmpJoin=makeType(newMask & ~ENUM_MASK,newLoc,newObjs,newTypevar,null);
  return makeType(newMask,newLoc,newObjs,newTypevar,EnumType.normalizeForJoin(newEnums,tmpJoin));
}
