{
  this.compiler=compiler;
  this.registry=compiler.getTypeRegistry();
  this.commonTypes=compiler.getSymbolTable().getTypesUtilObject();
  this.OLD_UNKNOWN_FUNCTION_TYPE=registry.getNativeType(JSTypeNative.U2U_FUNCTION_TYPE);
  this.OLD_UNKNOWN_TYPE=registry.getNativeType(JSTypeNative.UNKNOWN_TYPE);
  com.google.javascript.rhino.jstype.JSType oldNativeType;
  oldNativeType=registry.getNativeType(JSTypeNative.BOOLEAN_TYPE);
  JSType.BOOLEAN.setOldType(oldNativeType);
  cachedTypes.put(JSType.BOOLEAN,oldNativeType);
  JSType.TRUE_TYPE.setOldType(oldNativeType);
  cachedTypes.put(JSType.TRUE_TYPE,oldNativeType);
  JSType.FALSE_TYPE.setOldType(oldNativeType);
  cachedTypes.put(JSType.FALSE_TYPE,oldNativeType);
  oldNativeType=registry.getNativeType(JSTypeNative.NO_TYPE);
  JSType.BOTTOM.setOldType(oldNativeType);
  cachedTypes.put(JSType.BOTTOM,oldNativeType);
  oldNativeType=registry.getNativeType(JSTypeNative.NULL_TYPE);
  JSType.NULL.setOldType(oldNativeType);
  cachedTypes.put(JSType.NULL,oldNativeType);
  oldNativeType=registry.getNativeType(JSTypeNative.NUMBER_TYPE);
  JSType.NUMBER.setOldType(oldNativeType);
  cachedTypes.put(JSType.NUMBER,oldNativeType);
  oldNativeType=registry.getNativeType(JSTypeNative.STRING_TYPE);
  JSType.STRING.setOldType(oldNativeType);
  cachedTypes.put(JSType.STRING,oldNativeType);
  oldNativeType=registry.getNativeType(JSTypeNative.ALL_TYPE);
  JSType.TOP.setOldType(oldNativeType);
  cachedTypes.put(JSType.TOP,oldNativeType);
  oldNativeType=registry.getNativeType(JSTypeNative.VOID_TYPE);
  JSType.UNDEFINED.setOldType(oldNativeType);
  cachedTypes.put(JSType.UNDEFINED,oldNativeType);
  JSType.UNKNOWN.setOldType(OLD_UNKNOWN_TYPE);
  cachedTypes.put(JSType.UNKNOWN,OLD_UNKNOWN_TYPE);
  commonTypes.topFunction().setOldType(OLD_UNKNOWN_FUNCTION_TYPE);
  cachedTypes.put(commonTypes.topFunction(),OLD_UNKNOWN_FUNCTION_TYPE);
  commonTypes.qmarkFunction().setOldType(OLD_UNKNOWN_FUNCTION_TYPE);
  cachedTypes.put(commonTypes.qmarkFunction(),OLD_UNKNOWN_FUNCTION_TYPE);
}
