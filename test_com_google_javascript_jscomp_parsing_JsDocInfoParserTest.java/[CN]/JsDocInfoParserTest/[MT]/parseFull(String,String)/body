{
  TestErrorReporter testErrorReporter=new TestErrorReporter(null,warnings);
  Config config=new Config(extraAnnotations,extraSuppressions,true,LanguageMode.ECMASCRIPT3,false,false);
  ParseResult result=ParserRunner.parse(new SimpleSourceFile("source",false),code,config,testErrorReporter);
  assertTrue("some expected warnings were not reported",testErrorReporter.hasEncounteredAllWarnings());
  return result.ast;
}
