{
  TestErrorReporter errorReporter=new TestErrorReporter(null,warnings);
  boolean isIdeMode=parseDocumentation;
  Config config=new Config(extraAnnotations,extraSuppressions,LanguageMode.ECMASCRIPT3);
  config.setIdeMode(isIdeMode);
  config.setParseJsDocDocumentation(parseDocumentation);
  config.setPreserveJsDocWhitespace(preserveWhitespace);
  StaticSourceFile file=new SimpleSourceFile("testcode",false);
  JsDocInfoParser jsdocParser=new JsDocInfoParser(stream(comment),comment,0,file,config,errorReporter);
  if (fileLevelJsDocBuilder != null) {
    jsdocParser.setFileLevelJsDocBuilder(fileLevelJsDocBuilder);
  }
  jsdocParser.parse();
  errorReporter.assertHasEncounteredAllWarnings();
  if (parseFileOverview) {
    return jsdocParser.getFileOverviewJSDocInfo();
  }
 else {
    return jsdocParser.retrieveAndResetParsedJSDocInfo();
  }
}
