{
  Node function=t.getEnclosingFunction();
  if (function == null) {
    return null;
  }
  NameInformation ref=scopes.get(function);
  if (ref != null) {
    return ref;
  }
  Node parent=function.getParent();
  if (parent != null) {
    while (parent.getType() == Token.HOOK) {
      parent=parent.getParent();
    }
    if (parent.getType() == Token.NAME) {
      return scopes.get(parent);
    }
    if (parent.getType() == Token.ASSIGN) {
      Node gramp=parent.getParent();
      if (gramp != null && gramp.getType() == Token.EXPR_RESULT) {
        return scopes.get(gramp);
      }
    }
  }
  return null;
}
