{
  if (expr.getChildCount() < 1 + MAPUNION_PARAM_COUNT) {
    warnMissingParam("mapunion",expr);
    return false;
  }
  if (expr.getChildCount() > 1 + MAPUNION_PARAM_COUNT) {
    warnExtraParam("mapunion",expr);
    return false;
  }
  if (!validTTLUnionTypeExpression(expr.getChildAtIndex(1))) {
    warnInvalidInside("mapunion",expr.getChildAtIndex(1));
    return false;
  }
  if (!expr.getChildAtIndex(2).isFunction()) {
    warnInvalid("map function",expr.getChildAtIndex(2));
    return false;
  }
  Node mapFn=expr.getChildAtIndex(2);
  Node mapFnParam=mapFn.getChildAtIndex(1);
  if (!mapFnParam.hasChildren()) {
    warnMissingParam("map function",mapFnParam);
    return false;
  }
  if (!mapFnParam.hasOneChild()) {
    warnExtraParam("map function",mapFnParam);
    return false;
  }
  Node mapFnBody=mapFn.getChildAtIndex(2);
  if (!validTypeTransformationExpression(mapFnBody)) {
    warnInvalidInside("map function body",mapFnBody);
    return false;
  }
  return true;
}
