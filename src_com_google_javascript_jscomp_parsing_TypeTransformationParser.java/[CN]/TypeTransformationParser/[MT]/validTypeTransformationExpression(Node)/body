{
  if (!isValidExpression(expr)) {
    warnInvalidExpression("type transformation",expr);
    return false;
  }
  if (isTypeVar(expr) || isTypeName(expr)) {
    return true;
  }
  Node operation=expr.getFirstChild();
  String keyword=operation.getString();
  if (!isValidOperation(keyword)) {
    warnInvalidExpression("type transformation",operation);
    return false;
  }
  if (belongsTo(keyword,TYPE_CONSTRUCTORS)) {
    return validTTLTypeExpression(expr);
  }
  if (isKeyword(keyword,Keywords.COND)) {
    return validTTLConditionalExpression(expr);
  }
  if (isKeyword(keyword,Keywords.MAPUNION)) {
    return validTTLMapunionExpression(expr);
  }
  throw new IllegalStateException("Invalid type transformation expression");
}
