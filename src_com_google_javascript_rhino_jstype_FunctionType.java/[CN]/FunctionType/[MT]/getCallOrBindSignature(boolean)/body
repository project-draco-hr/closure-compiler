{
  boolean isBind=!isCall;
  FunctionBuilder builder=new FunctionBuilder(registry).withReturnType(isCall ? getReturnType() : getBindReturnType(-1));
  Node origParams=getParametersNode();
  if (origParams != null) {
    Node params=origParams.cloneTree();
    Node thisTypeNode=Node.newString(Token.NAME,"thisType");
    thisTypeNode.setJSType(registry.createOptionalNullableType(getTypeOfThis()));
    params.addChildToFront(thisTypeNode);
    thisTypeNode.setOptionalArg(isCall);
    if (isBind) {
      for (Node current=thisTypeNode.getNext(); current != null; current=current.getNext()) {
        current.setOptionalArg(true);
      }
    }
    builder.withParamsNode(params);
  }
  return builder.build();
}
