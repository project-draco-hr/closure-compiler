{
  if (qname.isIdentifier() || null == getNamespace(qname.getLeftmostName())) {
    String name=qname.getLeftmostName();
    if (!locals.containsKey(name)) {
      externs.put(name,JSType.UNKNOWN);
    }
    return null;
  }
  Namespace leftmost=getNamespace(qname.getLeftmostName());
  QualifiedName props=qname.getAllButLeftmost();
  while (!props.isIdentifier() && !leftmost.hasSubnamespace(props.getAllButRightmost())) {
    props=props.getAllButRightmost();
  }
  Namespace ns=props.isIdentifier() ? leftmost : leftmost.getSubnamespace(props.getAllButRightmost());
  if (ns.isNamespaceFinalized()) {
    Preconditions.checkNotNull(ns.getConstDeclNode(),"Namespace %s was finalized incorrectly",ns.getName());
    return ns.getConstDeclNode();
  }
  String pname=props.getRightmostName();
  ns.addUndeclaredProperty(pname,null,JSType.UNKNOWN,false);
  return null;
}
