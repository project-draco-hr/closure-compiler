{
  CompilerOptions options=new CompilerOptions();
  ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);
  VERBOSE.setOptionsForWarningLevel(options);
  options.setLanguageIn(LanguageMode.ECMASCRIPT6_TYPED);
  options.setLanguageOut(LanguageMode.ECMASCRIPT5_STRICT);
  options.setCheckSymbols(true);
  options.setCheckTypes(true);
  options.setPrettyPrint(true);
  options.getDependencyOptions().setDependencySorting(false);
  options.getDependencyOptions().setEs6ModuleOrder(false);
  SourceFile externs=SourceFile.fromCode("externs.js","var window;");
  SourceFile src=SourceFile.fromCode("src.js",js);
  Compiler compiler=new Compiler();
  compiler.compile(externs,src,options);
  return compiler.toSource();
}
