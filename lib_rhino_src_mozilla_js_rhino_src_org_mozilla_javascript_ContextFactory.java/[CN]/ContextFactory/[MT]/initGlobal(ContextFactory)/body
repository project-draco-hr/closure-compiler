{
  if (factory == null) {
    throw new IllegalArgumentException();
  }
  if (hasCustomGlobal) {
    throw new IllegalStateException();
  }
  hasCustomGlobal=true;
  global=factory;
}
