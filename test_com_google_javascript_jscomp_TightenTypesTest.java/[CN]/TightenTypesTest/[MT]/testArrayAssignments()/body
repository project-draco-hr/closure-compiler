{
  testSame("/** @constructor */ function Foo() {}\n" + "var a = [];\n" + "function foo() { return []; }\n"+ "(a.length == 0 ? a : foo())[0] = new Foo;\n"+ "var b = a[0];\n"+ "var c = foo()[0];\n");
  assertType("(Array,Foo)",getType("b"));
  assertType("(Array,Foo)",getType("c"));
}
