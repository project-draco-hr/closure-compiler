{
  testSame("/** @constructor */ function Foo() {}\n" + "Foo.prototype.prop = function() { this.prop2(); }\n" + "Foo.prototype.prop2 = function() { b = new Foo; }\n"+ "var a = new Foo;\n"+ "a = [][0];\n"+ "function fun(a) {\n"+ "  return a.prop();\n"+ "}\n"+ "var b;\n"+ "fun(a);\n");
  assertType("Foo",getType("a"));
  assertType("Foo",getType("b"));
}
