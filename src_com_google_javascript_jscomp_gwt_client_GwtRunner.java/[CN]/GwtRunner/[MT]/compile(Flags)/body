{
  List<SourceFile> externs=fromFileArray(flags.getExterns(),"Extern_");
  List<SourceFile> jsCode=fromFileArray(flags.getJsCode(),"Input_");
  ImmutableMap<String,SourceMapInput> sourceMaps=buildSourceMaps(flags.getJsCode(),"Input_");
  CompilerOptions options=new CompilerOptions();
  applyDefaultOptions(options);
  applyOptionsFromFlags(options,flags);
  options.setInputSourceMaps(sourceMaps);
  disableUnsupportedOptions(options);
  NodeErrorManager errorManager=new NodeErrorManager();
  Compiler compiler=new Compiler();
  compiler.setErrorManager(errorManager);
  compiler.compile(externs,jsCode,options);
  ModuleOutput output=new ModuleOutput();
  output.compiledCode=compiler.toSource();
  output.errors=toNativeErrorArray(errorManager.errors);
  output.warnings=toNativeErrorArray(errorManager.warnings);
  if (flags.getCreateSourceMap()) {
    StringBuilder b=new StringBuilder();
    try {
      compiler.getSourceMap().appendTo(b,"IGNORED");
    }
 catch (    IOException e) {
    }
    output.sourceMap=b.toString();
  }
  return output;
}
