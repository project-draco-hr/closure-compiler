{
  boolean isModuleFile=isModuleFile(n);
  if (isModuleFile) {
    checkStrictModeDirective(t,n);
  }
  if (isModuleFile || isLoadModuleCall(n)) {
    enterModule(n);
  }
  if (isGetModuleCall(n)) {
    rewriteGetModuleCall(t,n);
  }
  if (inModule()) {
switch (n.getType()) {
case Token.SCRIPT:
      current.moduleScope=t.getScope();
    break;
case Token.BLOCK:
  if (current.moduleScopeRoot == parent && parent.isFunction()) {
    current.moduleScope=t.getScope();
  }
break;
case Token.ASSIGN:
if (isGetModuleCallAlias(n)) {
rewriteGetModuleCallAlias(t,n);
}
break;
default :
if (current.moduleScopeRoot == parent && parent.isBlock()) {
current.moduleScope=t.getScope();
}
break;
}
}
return true;
}
