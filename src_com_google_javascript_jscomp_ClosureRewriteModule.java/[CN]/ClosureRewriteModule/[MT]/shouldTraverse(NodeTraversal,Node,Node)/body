{
  if (isModuleFile(n) || isLoadModuleCall(n)) {
    enterModule(n);
  }
  if (isGetModuleCall(n)) {
    rewriteGetModuleCall(t,n);
  }
  if (inModule()) {
switch (n.getType()) {
case Token.BLOCK:
      if (current.moduleScopeRoot == parent && parent.isFunction()) {
        current.moduleScope=t.getScope();
      }
    break;
case Token.SCRIPT:
  current.moduleScope=t.getScope();
break;
}
}
return true;
}
