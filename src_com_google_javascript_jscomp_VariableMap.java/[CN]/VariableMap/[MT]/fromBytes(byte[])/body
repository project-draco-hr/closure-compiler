{
  Iterable<String> lines;
  try {
    lines=CharStreams.readLines(CharStreams.newReaderSupplier(ByteStreams.newInputStreamSupplier(bytes),Charsets.UTF_8));
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  ImmutableMap.Builder<String,String> map=ImmutableMap.builder();
  for (  String line : lines) {
    int pos=findIndexOfChar(line,SEPARATOR);
    if (pos <= 0 || pos == line.length() - 1) {
      throw new ParseException("Bad line: " + line,0);
    }
    map.put(unescape(line.substring(0,pos)),unescape(line.substring(pos + 1)));
  }
  return new VariableMap(map.build());
}
