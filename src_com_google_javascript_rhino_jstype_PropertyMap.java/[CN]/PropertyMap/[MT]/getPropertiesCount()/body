{
  PropertyMap primaryParent=getPrimaryParent();
  if (primaryParent == null) {
    return this.properties.size();
  }
  Set<String> props=Sets.newHashSet();
  collectPropertyNames(props);
  return props.size();
}
