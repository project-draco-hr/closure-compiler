{
  if (reps == 0) {
    return;
  }
  StringBuilder sb=new StringBuilder();
  LineMapEncoder.encodeEntry(sb,id,lastId,reps);
  if (validate) {
    LineMapDecoder.LineEntry entry=LineMapDecoder.decodeLineEntry(sb.toString(),lastId);
    Preconditions.checkState(entry.id == id && entry.reps == reps,"expected (%s,%s) but got (%s,%s)",id,reps,entry.id,entry.reps);
  }
  out.append(sb);
  lastId=id;
}
