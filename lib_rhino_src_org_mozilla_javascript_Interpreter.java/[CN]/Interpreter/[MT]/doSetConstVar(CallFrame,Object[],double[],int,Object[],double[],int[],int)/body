{
  if (!frame.useActivation) {
    if ((varAttributes[indexReg] & ScriptableObject.READONLY) == 0) {
      throw Context.reportRuntimeError1("msg.var.redecl",frame.idata.argNames[indexReg]);
    }
    if ((varAttributes[indexReg] & ScriptableObject.UNINITIALIZED_CONST) != 0) {
      vars[indexReg]=stack[stackTop];
      varAttributes[indexReg]&=~ScriptableObject.UNINITIALIZED_CONST;
      varDbls[indexReg]=sDbl[stackTop];
    }
  }
 else {
    Object val=stack[stackTop];
    if (val == DOUBLE_MARK)     val=ScriptRuntime.wrapNumber(sDbl[stackTop]);
    String stringReg=frame.idata.argNames[indexReg];
    if (frame.scope instanceof ConstProperties) {
      ConstProperties cp=(ConstProperties)frame.scope;
      cp.putConst(stringReg,frame.scope,val);
    }
 else     throw Kit.codeBug();
  }
  return stackTop;
}
