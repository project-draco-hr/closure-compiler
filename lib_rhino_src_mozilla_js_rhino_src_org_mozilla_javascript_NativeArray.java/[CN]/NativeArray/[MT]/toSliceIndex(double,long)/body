{
  long result;
  if (value < 0.0) {
    if (value + length < 0.0) {
      result=0;
    }
 else {
      result=(long)(value + length);
    }
  }
 else   if (value > length) {
    result=length;
  }
 else {
    result=(long)value;
  }
  return result;
}
