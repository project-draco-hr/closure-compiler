{
  int startErrorCount=compiler.getErrorManager().getErrorCount();
  try {
    ParserRunner.ParseResult result=ParserRunner.parse(sourceFile,sourceFile.getCode(),compiler.getParserConfig(sourceFile.isExtern() ? AbstractCompiler.ConfigContext.EXTERNS : AbstractCompiler.ConfigContext.DEFAULT),compiler.getDefaultErrorReporter());
    root=result.ast;
    if (compiler.isIdeMode()) {
      compiler.addComments(sourceFile.getName(),result.comments);
    }
  }
 catch (  IOException e) {
    compiler.report(JSError.make(AbstractCompiler.READ_ERROR,sourceFile.getName()));
  }
  if (root == null || (compiler.getErrorManager().getErrorCount() > startErrorCount && !compiler.isIdeMode())) {
    root=IR.script();
  }
 else {
    compiler.prepareAst(root);
  }
  root.setStaticSourceFile(sourceFile);
}
