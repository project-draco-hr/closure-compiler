{
  Node insertSpot=null;
  Node block=function.getLastChild();
  for (int i=0; i < paramList.getChildCount(); i++) {
    Node param=paramList.getChildAtIndex(i);
    if (param.isDefaultValue()) {
      Node name=param.removeFirstChild();
      Node defaultValue=param.removeFirstChild();
      paramList.replaceChild(param,name);
      name.setOptionalArg(true);
      Node stm=IR.exprResult(IR.and(IR.sheq(name.cloneNode(),IR.name("undefined")),IR.assign(name.cloneNode(),defaultValue)));
      block.addChildAfter(stm.useSourceInfoIfMissingFromForTree(param),insertSpot);
      insertSpot=stm;
      compiler.reportCodeChange();
    }
 else     if (param.isRest()) {
      param.setType(Token.NAME);
      param.setVarArgs(true);
      Node newArr=IR.exprResult(IR.assign(IR.name(param.getString()),IR.call(IR.getprop(IR.getprop(IR.arraylit(),IR.string("slice")),IR.string("call")),IR.name("arguments"),IR.number(i))));
      block.addChildAfter(newArr.useSourceInfoIfMissingFromForTree(param),insertSpot);
      compiler.reportCodeChange();
    }
  }
}
