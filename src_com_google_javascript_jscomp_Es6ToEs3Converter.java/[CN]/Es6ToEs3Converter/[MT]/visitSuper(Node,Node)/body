{
  Node enclosing=parent;
  Node potentialCallee=node;
  if (!parent.isCall()) {
    enclosing=parent.getParent();
    potentialCallee=parent;
  }
  if (!enclosing.isCall() || enclosing.getFirstChild() != potentialCallee) {
    cannotConvertYet(node,"Only calls to super or to a method of super are supported.");
    return;
  }
  Node clazz=NodeUtil.getEnclosingClass(node);
  if (clazz == null) {
    compiler.report(JSError.make(node,NO_SUPERTYPE));
    return;
  }
  if (NodeUtil.getClassNameNode(clazz) == null) {
    return;
  }
  Node enclosingMemberDef=NodeUtil.getEnclosingClassMember(node);
  if (enclosingMemberDef.isStaticMember()) {
    Node superName=clazz.getFirstChild().getNext();
    Node callTarget;
    potentialCallee.detachFromParent();
    if (potentialCallee == node) {
      potentialCallee=IR.getprop(superName.cloneTree(),IR.string(enclosingMemberDef.getString()));
      enclosing.putBooleanProp(Node.FREE_CALL,false);
    }
 else {
      potentialCallee.replaceChild(node,superName.cloneTree());
    }
    callTarget=IR.getprop(potentialCallee,IR.string("call"));
    enclosing.addChildToFront(callTarget);
    enclosing.addChildAfter(IR.thisNode(),callTarget);
    enclosing.useSourceInfoIfMissingFromForTree(enclosing);
    compiler.reportCodeChange();
    return;
  }
  Node methodName;
  Node callName=enclosing.removeFirstChild();
  if (callName.isSuper()) {
    methodName=IR.string(enclosingMemberDef.getString()).srcref(enclosing);
  }
 else {
    methodName=IR.string(callName.getLastChild().getString()).srcref(enclosing);
  }
  boolean useUnique=NodeUtil.isStatement(clazz) && !isInFunction(clazz);
  String uniqueClassString=useUnique ? getUniqueClassName(NodeUtil.getClassName(clazz)) : NodeUtil.getClassName(clazz);
  Node uniqueClassName=NodeUtil.newQualifiedNameNode(compiler.getCodingConvention(),uniqueClassString);
  uniqueClassName.useSourceInfoIfMissingFromForTree(enclosing);
  Node base=IR.getprop(uniqueClassName,IR.string("base").srcref(enclosing)).srcref(enclosing);
  enclosing.addChildToFront(methodName);
  enclosing.addChildToFront(IR.thisNode().srcref(enclosing));
  enclosing.addChildToFront(base);
  enclosing.putBooleanProp(Node.FREE_CALL,false);
  compiler.reportCodeChange();
}
