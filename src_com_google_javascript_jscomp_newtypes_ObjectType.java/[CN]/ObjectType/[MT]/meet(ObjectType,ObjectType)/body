{
  Preconditions.checkState(areRelatedNominalTypes(obj1.nominalType,obj2.nominalType));
  if (obj1 == TOP_OBJECT) {
    return obj2;
  }
 else   if (obj2 == TOP_OBJECT) {
    return obj1;
  }
  NominalType resultNomType=NominalType.pickSubclass(obj1.nominalType,obj2.nominalType);
  Namespace resultNs=Objects.equals(obj1.ns,obj2.ns) ? obj1.ns : null;
  FunctionType fn=FunctionType.meet(obj1.fn,obj2.fn);
  if (!FunctionType.isInhabitable(fn)) {
    return BOTTOM_OBJECT;
  }
  boolean isLoose=obj1.isLoose && obj2.isLoose || fn != null && fn.isLoose();
  if (resultNomType != null && resultNomType.isFunction() && fn == null) {
    fn=obj1.fn == null ? obj2.fn : obj1.fn;
    isLoose=fn.isLoose();
  }
  PersistentMap<String,Property> props;
  if (isLoose) {
    props=joinPropsLoosely(obj1.props,obj2.props);
  }
 else {
    props=meetPropsHelper(false,resultNomType,resultNs,obj1.props,obj2.props);
  }
  if (props == BOTTOM_MAP) {
    return BOTTOM_OBJECT;
  }
  ObjectKind ok=ObjectKind.meet(obj1.objectKind,obj2.objectKind);
  return new ObjectType(resultNomType,props,fn,resultNs,isLoose,ok);
}
