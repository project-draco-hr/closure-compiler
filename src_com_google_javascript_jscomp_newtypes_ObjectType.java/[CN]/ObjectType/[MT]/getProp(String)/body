{
  Property p=getLeftmostProp(qname);
  if (TypeUtils.isIdentifier(qname)) {
    return p == null ? TypeConsts.UNDEFINED : p.getType();
  }
 else {
    Preconditions.checkState(p != null);
    return p.getType().getProp(TypeUtils.getPropPath(qname));
  }
}
