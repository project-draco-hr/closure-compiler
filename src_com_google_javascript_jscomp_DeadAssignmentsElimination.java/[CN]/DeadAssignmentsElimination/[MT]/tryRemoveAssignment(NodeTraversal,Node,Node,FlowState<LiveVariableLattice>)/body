{
  if (NodeUtil.isAssignmentOp(n)) {
    Node lhs=n.getFirstChild();
    Node rhs=lhs.getNext();
    if (rhs != null) {
      tryRemoveAssignment(t,rhs,exprRoot,state);
      rhs=lhs.getNext();
    }
    Scope scope=t.getScope();
    if (!NodeUtil.isName(lhs)) {
      return;
    }
    String name=lhs.getString();
    if (!scope.isDeclared(name,false)) {
      return;
    }
    Var var=scope.getVar(name);
    if (liveness.getEscapedLocals().contains(var)) {
      return;
    }
    if (state.getOut().isLive(var)) {
      return;
    }
    if (state.getIn().isLive(var) && isVariableStillLiveWithinExpression(n,exprRoot,var.name)) {
      return;
    }
    if (NodeUtil.isAssign(n)) {
      n.removeChild(rhs);
      n.getParent().replaceChild(n,rhs);
    }
 else     if (NodeUtil.isAssignmentOp(n)) {
      n.removeChild(rhs);
      n.removeChild(lhs);
      Node op=new Node(NodeUtil.getOpFromAssignmentOp(n),lhs,rhs);
      n.getParent().replaceChild(n,op);
    }
 else {
      Preconditions.checkState(false,"Unknow statement");
    }
    compiler.reportCodeChange();
    return;
  }
 else {
    for (Node c=n.getFirstChild(); c != null; ) {
      Node next=c.getNext();
      if (!ControlFlowGraph.isEnteringNewCfgNode(c)) {
        tryRemoveAssignment(t,c,exprRoot,state);
      }
      c=next;
    }
    return;
  }
}
