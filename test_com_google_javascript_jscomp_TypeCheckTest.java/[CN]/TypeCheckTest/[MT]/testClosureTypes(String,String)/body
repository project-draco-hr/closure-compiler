{
  Node n=compiler.parseTestCode(js);
  Node externs=new Node(Token.BLOCK);
  Node externAndJsRoot=new Node(Token.BLOCK,externs,n);
  externAndJsRoot.setIsSyntheticBlock(true);
  assertEquals("parsing error: " + Joiner.on(", ").join(compiler.getErrors()),0,compiler.getErrorCount());
  new ProcessClosurePrimitives(compiler,CheckLevel.ERROR,true).process(null,n);
  CodingConvention convention=compiler.getCodingConvention();
  new TypeCheck(compiler,new ClosureReverseAbstractInterpreter(convention,registry).append(new SemanticReverseAbstractInterpreter(convention,registry)).getFirst(),registry).processForTesting(null,n);
  assertEquals(0,compiler.getErrorCount());
  if (description == null) {
    assertEquals("unexpected warning(s) : " + Joiner.on(", ").join(compiler.getWarnings()),0,compiler.getWarningCount());
  }
 else {
    assertEquals(1,compiler.getWarningCount());
    assertEquals(description,compiler.getWarnings()[0].description);
  }
}
