{
  String js="var goog = {};" + "goog.foo = {};" + "goog.foo.bar = 5;";
  TypeCheckResult p=parseAndTypeCheckWithScope(js);
  JSType googScopeType=p.scope.getVar("goog").getType();
  assertThat(googScopeType).isInstanceOf(ObjectType.class);
  assertTrue("foo property not present on goog type",googScopeType.hasProperty("foo"));
  assertFalse("bar property present on goog type",googScopeType.hasProperty("bar"));
  Node varNode=p.root.getFirstChild();
  assertEquals(Token.VAR,varNode.getType());
  JSType googNodeType=varNode.getFirstChild().getJSType();
  assertThat(googNodeType).isInstanceOf(ObjectType.class);
  assertSame(googNodeType,googScopeType);
  Node getpropFoo1=varNode.getNext().getFirstChild().getFirstChild();
  assertEquals(Token.GETPROP,getpropFoo1.getType());
  assertEquals("goog",getpropFoo1.getFirstChild().getString());
  JSType googGetpropFoo1Type=getpropFoo1.getFirstChild().getJSType();
  assertThat(googGetpropFoo1Type).isInstanceOf(ObjectType.class);
  assertSame(googScopeType,googGetpropFoo1Type);
  JSType googFooType=((ObjectType)googScopeType).getPropertyType("foo");
  assertThat(googFooType).isInstanceOf(ObjectType.class);
  Node getpropFoo2=varNode.getNext().getNext().getFirstChild().getFirstChild().getFirstChild();
  assertEquals(Token.GETPROP,getpropFoo2.getType());
  assertEquals("goog",getpropFoo2.getFirstChild().getString());
  JSType googGetpropFoo2Type=getpropFoo2.getFirstChild().getJSType();
  assertThat(googGetpropFoo2Type).isInstanceOf(ObjectType.class);
  assertSame(googScopeType,googGetpropFoo2Type);
  JSType googFooGetprop2Type=getpropFoo2.getJSType();
  assertTrue("goog.foo incorrectly annotated in goog.foo.bar selection",googFooGetprop2Type instanceof ObjectType);
  ObjectType googFooGetprop2ObjectType=(ObjectType)googFooGetprop2Type;
  assertFalse("foo property present on goog.foo type",googFooGetprop2ObjectType.hasProperty("foo"));
  assertTrue("bar property not present on goog.foo type",googFooGetprop2ObjectType.hasProperty("bar"));
  assertTypeEquals("bar property on goog.foo type incorrectly inferred",NUMBER_TYPE,googFooGetprop2ObjectType.getPropertyType("bar"));
}
