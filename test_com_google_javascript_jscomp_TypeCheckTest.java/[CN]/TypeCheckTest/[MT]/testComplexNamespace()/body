{
  String js="var goog = {};" + "goog.foo = {};" + "goog.foo.bar = 5;";
  Pair<Node,Scope> p=parseAndTypeCheckWithScope(js);
  JSType googScopeType=p.second.getVar("goog").getType();
  assertTrue(googScopeType instanceof ObjectType);
  assertTrue("foo property not present on goog type",((ObjectType)googScopeType).hasProperty("foo"));
  assertFalse("bar property present on goog type",((ObjectType)googScopeType).hasProperty("bar"));
  Node varNode=p.first.getFirstChild();
  assertEquals(Token.VAR,varNode.getType());
  JSType googNodeType=varNode.getFirstChild().getJSType();
  assertTrue(googNodeType instanceof ObjectType);
  assertTrue(googScopeType == googNodeType);
  Node getpropFoo1=varNode.getNext().getFirstChild().getFirstChild();
  assertEquals(Token.GETPROP,getpropFoo1.getType());
  assertEquals("goog",getpropFoo1.getFirstChild().getString());
  JSType googGetpropFoo1Type=getpropFoo1.getFirstChild().getJSType();
  assertTrue(googGetpropFoo1Type instanceof ObjectType);
  assertTrue(googGetpropFoo1Type == googScopeType);
  JSType googFooType=((ObjectType)googScopeType).getPropertyType("foo");
  assertTrue(googFooType instanceof ObjectType);
  Node getpropFoo2=varNode.getNext().getNext().getFirstChild().getFirstChild().getFirstChild();
  assertEquals(Token.GETPROP,getpropFoo2.getType());
  assertEquals("goog",getpropFoo2.getFirstChild().getString());
  JSType googGetpropFoo2Type=getpropFoo2.getFirstChild().getJSType();
  assertTrue(googGetpropFoo2Type instanceof ObjectType);
  assertTrue(googGetpropFoo2Type == googScopeType);
  JSType googFooGetprop2Type=getpropFoo2.getJSType();
  assertTrue("goog.foo incorrectly annotated in goog.foo.bar selection",googFooGetprop2Type instanceof ObjectType);
  ObjectType googFooGetprop2ObjectType=(ObjectType)googFooGetprop2Type;
  assertFalse("foo property present on goog.foo type",googFooGetprop2ObjectType.hasProperty("foo"));
  assertTrue("bar property not present on goog.foo type",googFooGetprop2ObjectType.hasProperty("bar"));
  assertEquals("bar property on goog.foo type incorrectly inferred",NUMBER_TYPE,googFooGetprop2ObjectType.getPropertyType("bar"));
}
