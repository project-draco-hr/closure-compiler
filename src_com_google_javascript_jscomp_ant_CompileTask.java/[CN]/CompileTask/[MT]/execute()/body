{
  if (this.outputFile == null) {
    throw new BuildException("outputFile attribute must be set");
  }
  Compiler.setLoggingLevel(Level.OFF);
  CompilerOptions options=createCompilerOptions();
  Compiler compiler=createCompiler(options);
  List<SourceFile> externs=findExternFiles();
  List<SourceFile> sources=findSourceFiles();
  if (isStale() || forceRecompile) {
    log("Compiling " + sources.size() + " file(s) with "+ externs.size()+ " extern(s)");
    Result result=compiler.compile(externs,sources,options);
    if (result.success) {
      writeResult(compiler.toSource());
    }
 else {
      throw new BuildException("Compilation failed.");
    }
  }
 else {
    log("None of the files changed. Compilation skipped.");
  }
}
