{
  JSONArray modules=graph.toJson();
  assertEquals(6,modules.length());
  for (int i=0; i < modules.length(); i++) {
    JSONObject m=modules.getJSONObject(i);
    assertNotNull(m.getString("name"));
    assertNotNull(m.getJSONArray("dependencies"));
    assertNotNull(m.getJSONArray("transitive-dependencies"));
    assertNotNull(m.getJSONArray("inputs"));
  }
  JSONObject m=modules.getJSONObject(3);
  assertEquals("D",m.getString("name"));
  assertEquals("[\"B\"]",m.getJSONArray("dependencies").toString());
  assertEquals(2,m.getJSONArray("transitive-dependencies").length());
  assertEquals("[]",m.getJSONArray("inputs").toString());
}
