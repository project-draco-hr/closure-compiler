{
  if (!parseAlternative(state))   return false;
  char[] source=state.cpbegin;
  int index=state.cp;
  if (index != source.length && source[index] == '|') {
    RENode result;
    ++state.cp;
    result=new RENode(REOP_ALT);
    result.kid=state.result;
    if (!parseDisjunction(state))     return false;
    result.kid2=state.result;
    state.result=result;
    if (result.kid.op == REOP_FLAT && result.kid2.op == REOP_FLAT) {
      result.op=(state.flags & JSREG_FOLD) == 0 ? REOP_ALTPREREQ : REOP_ALTPREREQi;
      result.chr=result.kid.chr;
      result.index=result.kid2.chr;
      state.progLength+=13;
    }
 else     if (result.kid.op == REOP_CLASS && result.kid.index < 256 && result.kid2.op == REOP_FLAT && (state.flags & JSREG_FOLD) == 0) {
      result.op=REOP_ALTPREREQ2;
      result.chr=result.kid2.chr;
      result.index=result.kid.index;
      state.progLength+=13;
    }
 else     if (result.kid.op == REOP_FLAT && result.kid2.op == REOP_CLASS && result.kid2.index < 256 && (state.flags & JSREG_FOLD) == 0) {
      result.op=REOP_ALTPREREQ2;
      result.chr=result.kid.chr;
      result.index=result.kid2.index;
      state.progLength+=13;
    }
 else {
      state.progLength+=9;
    }
  }
  return true;
}
