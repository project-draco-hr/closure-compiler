{
  Compiler compiler=new Compiler();
  CompilerOptions options=new CompilerOptions();
  if (reportMisplacedTypeAnnotations) {
    options.setWarningLevel(DiagnosticGroups.MISPLACED_TYPE_ANNOTATION,CheckLevel.WARNING);
  }
  if (!reportEs3Props) {
    options.setWarningLevel(DiagnosticGroups.ES3,CheckLevel.OFF);
  }
  List<SourceFile> externs=ImmutableList.of();
  List<SourceFile> inputs=ImmutableList.of(SourceFile.fromCode("input",code));
  compiler.init(externs,inputs,options);
  compiler.parseInputs();
  return compiler;
}
