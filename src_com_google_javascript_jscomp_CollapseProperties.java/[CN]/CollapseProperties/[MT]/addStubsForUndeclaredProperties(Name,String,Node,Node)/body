{
  Preconditions.checkArgument(NodeUtil.isStatementBlock(parent));
  int numStubs=0;
  if (n.props != null) {
    for (    Name p : n.props) {
      if (p.needsToBeStubbed()) {
        String propAlias=alias + '$' + p.name;
        Node nameNode=Node.newString(Token.NAME,propAlias);
        Node newVar=new Node(Token.VAR,nameNode);
        if (addAfter == null) {
          parent.addChildToFront(newVar);
        }
 else {
          parent.addChildAfter(newVar,addAfter);
          addAfter=newVar;
        }
        numStubs++;
        compiler.reportCodeChange();
        if (p.refs.get(0).node.getLastChild().getBooleanProp(Node.IS_CONSTANT_NAME)) {
          nameNode.putBooleanProp(Node.IS_CONSTANT_NAME,true);
        }
      }
    }
  }
  return numStubs;
}
