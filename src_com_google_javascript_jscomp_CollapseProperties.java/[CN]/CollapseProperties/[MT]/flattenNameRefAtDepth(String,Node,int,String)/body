{
  int nType=n.getType();
  boolean isQName=nType == Token.NAME || nType == Token.GETPROP;
  boolean isObjKey=nType == Token.STRING || nType == Token.NUMBER;
  Preconditions.checkState(isObjKey || isQName);
  if (isQName) {
    for (int i=1; i < depth && n.hasChildren(); i++) {
      n=n.getFirstChild();
    }
    if (n.hasChildren()) {
      flattenNameRef(alias,n.getFirstChild(),n,originalName);
    }
  }
}
