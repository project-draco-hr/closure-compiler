{
  FunctionTypeBuilder builder=new FunctionTypeBuilder();
  Node child=n.getFirstChild();
  if (child.getType() == Token.THIS) {
    builder.addReceiverType(getNominalType(child.getFirstChild(),ownerType,registry,typeParameters));
    child=child.getNext();
  }
 else   if (child.getType() == Token.NEW) {
    builder.addNominalType(getNominalType(child.getFirstChild(),ownerType,registry,typeParameters));
    child=child.getNext();
  }
  if (child.getType() == Token.PARAM_LIST) {
    for (Node arg=child.getFirstChild(); arg != null; arg=arg.getNext()) {
      try {
switch (arg.getType()) {
case Token.EQUALS:
          builder.addOptFormal(getTypeFromNodeHelper(arg.getFirstChild(),ownerType,registry,typeParameters));
        break;
case Token.ELLIPSIS:
      Node restNode=arg.getFirstChild();
    builder.addRestFormals(restNode == null ? JSType.UNKNOWN : getTypeFromNodeHelper(restNode,ownerType,registry,typeParameters));
  break;
default :
builder.addReqFormal(getTypeFromNodeHelper(arg,ownerType,registry,typeParameters));
break;
}
}
 catch (FunctionTypeBuilder.WrongParameterOrderException e) {
warn("Wrong parameter order: required parameters are first, " + "then optional, then varargs",n);
}
}
child=child.getNext();
}
builder.addRetType(getTypeFromNodeHelper(child,ownerType,registry,typeParameters));
return builder.buildType();
}
