{
  Preconditions.checkState(td != null,"getTypedef should only be " + "called when we know that the typedef is defined");
  if (td.isResolved()) {
    return;
  }
  JSTypeExpression texp=td.getTypeExpr();
  JSType tdType;
  if (texp == null) {
    warn("Circular type definitions are not allowed.",td.getTypeExprForErrorReporting().getRoot());
    tdType=JSType.UNKNOWN;
  }
 else {
    tdType=getTypeFromJSTypeExpression(texp,registry,null);
  }
  td.resolveTypedef(tdType);
}
