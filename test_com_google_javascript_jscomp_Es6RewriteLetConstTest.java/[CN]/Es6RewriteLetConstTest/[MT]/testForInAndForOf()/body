{
  test(Joiner.on('\n').join("const arr = [];","for (let i in [0, 1]) {","  arr.push(function() { return i; });","}"),Joiner.on('\n').join("var arr = [];","var $jscomp$loop$0 = {i: undefined};","for (var i in [0, 1]) {","  $jscomp$loop$0.i = i;","  arr.push((function($jscomp$loop$0) {","      return function() { return $jscomp$loop$0.i; };","  })($jscomp$loop$0));","  $jscomp$loop$0 = {i: $jscomp$loop$0.i};","}"));
  test(Joiner.on('\n').join("const arr = [];","for (let i of [0, 1]) {","  let i = 0;","  arr.push(function() { return i; });","}"),Joiner.on('\n').join("var arr = [];","var $jscomp$loop$1 = {i$0: undefined};","for (var i of [0, 1]) {","  $jscomp$loop$1.i$0 = 0;","  arr.push((function($jscomp$loop$1) {","      return function() { return $jscomp$loop$1.i$0; };","  })($jscomp$loop$1));","  $jscomp$loop$1 = {i$0: $jscomp$loop$1.i$0}","}"));
  test(Joiner.on('\n').join("for (;;) {","  let a = getArray();","  f = function() {","    for (var x in use(a)) {","      f(a);","      a.push(x);","      return x;","    }","  }","}"),Joiner.on('\n').join("var $jscomp$loop$0 = {a: undefined};","for (;; $jscomp$loop$0 = {a: $jscomp$loop$0.a}) {","  $jscomp$loop$0.a = getArray();","  f = (function($jscomp$loop$0) {","    return function() {","      for (var x in use($jscomp$loop$0.a)) {","        f($jscomp$loop$0.a);","        $jscomp$loop$0.a.push(x);","        return x;","      }","    };","  }($jscomp$loop$0));","}"));
}
