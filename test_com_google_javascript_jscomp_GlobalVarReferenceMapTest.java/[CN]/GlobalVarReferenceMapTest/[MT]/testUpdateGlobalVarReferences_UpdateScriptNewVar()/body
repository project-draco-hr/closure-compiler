{
  Map<Var,ReferenceCollection> scriptMap=Maps.newHashMap();
  final String var4="var4";
  globalScope.declare(var4,new Node(Token.NAME),null,INPUT2);
  ReferenceCollection newVar3Refs=new ReferenceCollection();
  Reference newVar3In2Ref=createRefForTest(INPUT2);
  newVar3Refs.references=Lists.newArrayList(newVar3In2Ref);
  scriptMap.put(globalScope.getVar(var4),newVar3Refs);
  map.updateGlobalVarReferences(scriptMap,scriptRoot);
  ReferenceCollection refs=map.getReferences(globalScope.getVar(var4));
  assertEquals(1,refs.references.size());
  assertEquals(newVar3In2Ref,refs.references.get(0));
}
