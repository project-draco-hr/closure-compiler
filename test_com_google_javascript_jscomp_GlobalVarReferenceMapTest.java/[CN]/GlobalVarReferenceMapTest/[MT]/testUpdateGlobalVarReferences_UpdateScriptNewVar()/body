{
  Map<Var,ReferenceCollection> scriptMap=Maps.newHashMap();
  final String var3="var3";
  globalScope.declare(var3,new Node(Token.NAME),null,INPUT2);
  ReferenceCollection newVar3Refs=new ReferenceCollection();
  Reference newVar3In2Ref=createRefForTest(INPUT2.getName());
  newVar3Refs.references=Lists.newArrayList(newVar3In2Ref);
  scriptMap.put(globalScope.getVar(var3),newVar3Refs);
  map.updateGlobalVarReferences(scriptMap,scriptRoot);
  ReferenceCollection refs=map.getReferences(globalScope.getVar(var3));
  assertEquals(1,refs.references.size());
  assertEquals(newVar3In2Ref,refs.references.get(0));
}
