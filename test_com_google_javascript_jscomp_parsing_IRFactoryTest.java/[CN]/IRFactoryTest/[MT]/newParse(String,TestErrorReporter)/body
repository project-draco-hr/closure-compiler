{
  CompilerEnvirons environment=new CompilerEnvirons();
  environment.setRecordingComments(true);
  environment.setRecordingLocalJsDocComments(true);
  Parser p=new Parser(environment);
  AstRoot script=p.parse(string,null,0);
  Config config=ParserRunner.createConfig(true,es5mode,false);
  Node root=IRFactory.transformTree(script,string,config,errorReporter);
  return root;
}
