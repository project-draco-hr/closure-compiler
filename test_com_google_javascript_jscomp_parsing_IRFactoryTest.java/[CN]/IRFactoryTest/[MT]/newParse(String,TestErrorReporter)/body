{
  CompilerEnvirons environment=new CompilerEnvirons();
  environment.setRecordingComments(true);
  environment.setRecordingLocalJsDocComments(true);
  Parser p=new Parser(environment);
  AstRoot script=p.parse(string,null,1);
  Config config=ParserRunner.createConfig(true,mode,false);
  Node root=IRFactory.transformTree(script,SourceFile.fromCode("FileName.js",string),string,config,errorReporter);
  return root;
}
