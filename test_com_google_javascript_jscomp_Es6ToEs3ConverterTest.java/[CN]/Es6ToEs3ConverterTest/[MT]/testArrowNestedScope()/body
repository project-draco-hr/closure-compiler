{
  test(LINE_JOINER.join("var outer = {","  f: function() {","     var a1 = () => this.x;","     var inner = {","       f: function() {","         var a2 = () => this.y;","       }","     };","  }","}"),LINE_JOINER.join("var outer = {","  f: function() {","     /** @const */ var $jscomp$this = this;","     var a1 = function() { return $jscomp$this.x; }","     var inner = {","       f: function() {","         /** @const */ var $jscomp$this = this;","         var a2 = function() { return $jscomp$this.y; }","       }","     };","  }","}"));
  test(LINE_JOINER.join("function f() {","  var setup = () => {","    function Foo() { this.x = 5; }","    this.f = new Foo;","  }","}"),LINE_JOINER.join("function f() {","  /** @const */ var $jscomp$this = this;","  var setup = function() {","    function Foo() { this.x = 5; }","    $jscomp$this.f = new Foo;","  }","}"));
}
