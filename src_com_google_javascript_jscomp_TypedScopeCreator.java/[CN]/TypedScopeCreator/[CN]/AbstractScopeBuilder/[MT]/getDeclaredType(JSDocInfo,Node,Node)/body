{
  if (info != null && info.hasType()) {
    return getDeclaredTypeInAnnotation(lValue,info);
  }
 else   if (rValue != null && rValue.isFunction() && shouldUseFunctionLiteralType(JSType.toMaybeFunctionType(rValue.getJSType()),info,lValue)) {
    return rValue.getJSType();
  }
 else   if (info != null) {
    if (info.hasEnumParameterType()) {
      if (rValue != null && rValue.isObjectLit()) {
        return rValue.getJSType();
      }
 else {
        return createEnumTypeFromNodes(rValue,lValue.getQualifiedName(),info,lValue);
      }
    }
 else     if (info.isConstructor() || info.isInterface()) {
      return createFunctionTypeFromNodes(rValue,lValue.getQualifiedName(),info,lValue);
    }
  }
  if (NodeUtil.isConstantDeclaration(compiler.getCodingConvention(),info,lValue)) {
    if (rValue != null) {
      JSType rValueType=getDeclaredRValueType(lValue,rValue);
      if (rValueType == null) {
        boolean isTypelessConstDecl=info != null && info.isConstant() && !info.hasType();
        if (isTypelessConstDecl) {
          compiler.report(JSError.make(lValue,CANNOT_INFER_CONST_TYPE));
        }
      }
 else {
        return rValueType;
      }
    }
  }
  return getDeclaredTypeInAnnotation(lValue,info);
}
