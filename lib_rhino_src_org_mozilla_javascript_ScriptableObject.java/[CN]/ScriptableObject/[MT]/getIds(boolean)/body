{
  Slot[] s=slots;
  Object[] a=ScriptRuntime.emptyArgs;
  if (s == null)   return a;
  int c=0;
  Slot slot=firstAdded;
  while (slot != null && slot.wasDeleted) {
    slot=slot.orderedNext;
  }
  while (slot != null) {
    if (getAll || (slot.getAttributes() & DONTENUM) == 0) {
      if (c == 0)       a=new Object[s.length];
      a[c++]=slot.name != null ? slot.name : Integer.valueOf(slot.indexOrHash);
    }
    slot=slot.orderedNext;
    while (slot != null && slot.wasDeleted) {
      slot=slot.orderedNext;
    }
  }
  if (c == a.length)   return a;
  Object[] result=new Object[c];
  System.arraycopy(a,0,result,0,c);
  return result;
}
