{
  if (comments == null) {
    return;
  }
  AstNode n=root;
  int napos=root.getPosition();
  int parapos=0;
  int lastcapos=-1;
  for (  Comment c : comments) {
    currentJsdoc=c;
    capos=currentJsdoc.getAbsolutePosition();
    if (capos <= lastcapos) {
      throw new RuntimeException("The list of jsdoc comments isn't sorted.");
    }
    lastcapos=capos;
    while (n != root) {
      if (finishesAfterJsdoc(n,napos)) {
        break;
      }
      AstNode tmp;
      tmp=n.getParent();
      if (tmp != null && finishesAfterJsdoc(tmp,parapos)) {
        tmp=siblingFinishesAfterJsdoc(n,parapos);
        if (tmp != null) {
          n=tmp;
          break;
        }
      }
      n=n.getParent();
      napos=parapos;
      parapos=n == root ? 0 : napos - n.getPosition();
    }
    NodePos np=attachComment(n,parapos);
    n=np.n;
    napos=np.apos;
    parapos=n == root ? 0 : napos - n.getPosition();
  }
}
