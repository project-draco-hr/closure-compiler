{
  collapses.clear();
  nodesToCollapse.clear();
  NodeTraversal.traverse(compiler,root,new CombinedCompilerPass(compiler,new ExploitAssigns(),new GatherCollapses()));
  if (!collapses.isEmpty()) {
    applyCollapses();
    compiler.reportCodeChange();
  }
}
