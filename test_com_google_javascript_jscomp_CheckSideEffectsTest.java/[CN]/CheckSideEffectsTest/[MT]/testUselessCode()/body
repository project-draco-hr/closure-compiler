{
  testSame("function f(x) { if(x) return; }");
  test("function f(x) { if(x); }","function f(x) { if(x); }",null,e);
  testSame("if(x) x = y;");
  test("if(x) x == bar();","if(x) JSCOMPILER_PRESERVE(x == bar());",null,e);
  testSame("x = 3;");
  test("x == 3;","JSCOMPILER_PRESERVE(x == 3);",null,e);
  testSame("var x = 'test'");
  test("var x = 'test'\n'Breakstr'","var x = 'test'\nJSCOMPILER_PRESERVE('Breakstr')",null,e);
  testSame("");
  testSame("foo();;;;bar();;;;");
  testSame("var a, b; a = 5, b = 6");
  test("var a, b; a = 5, b == 6","var a, b; a = 5, JSCOMPILER_PRESERVE(b == 6)",null,e);
  test("var a, b; a = (5, 6)","var a, b; a = (JSCOMPILER_PRESERVE(5), 6)",null,e);
  test("var a, b; a = (bar(), 6, 7)","var a, b; a = (bar(), JSCOMPILER_PRESERVE(6), 7)",null,e);
  test("var a, b; a = (bar(), bar(), 7, 8)","var a, b; a = (bar(), bar(), JSCOMPILER_PRESERVE(7), 8)",null,e);
  testSame("var a, b; a = (b = 7, 6)");
  testSame("function x(){}\nfunction f(a, b){}\nf(1,(x(), 2));");
  test("function x(){}\nfunction f(a, b){}\nf(1,(2, 3));","function x(){}\nfunction f(a, b){}\n" + "f(1,(JSCOMPILER_PRESERVE(2), 3));",null,e);
  test("var x = `TemplateA`\n'TestB'","var x = `TemplateA`\nJSCOMPILER_PRESERVE('TestB')",null,e);
  test("`LoneTemplate`","JSCOMPILER_PRESERVE(`LoneTemplate`)",null,e);
  test(LINE_JOINER.join("var name = 'Bad';","`${name}Template`;"),LINE_JOINER.join("var name = 'Bad';","JSCOMPILER_PRESERVE(`${name}Template`)"),null,e);
  test(LINE_JOINER.join("var name = 'BadTail';","`Template${name}`;"),LINE_JOINER.join("var name = 'BadTail';","JSCOMPILER_PRESERVE(`Template${name}`)"),null,e);
  testSame(LINE_JOINER.join("var name = 'Good';","var templateString = `${name}Template`;"));
  testSame("var templateString = `Template`;");
  testSame("tagged`Template`;");
  testSame("tagged`${name}Template`;");
}
