{
  int count=0;
  for (Node cursor=child; cursor != null; cursor=cursor.getNext()) {
    ++count;
  }
  if (!topLevel && (count > 10 || cfw.getCurrentCodeOffset() > 30000) && !hasVarsInRegs&& !isGenerator&& !inLocalBlock) {
    if (literals == null) {
      literals=new LinkedList<Node>();
    }
    literals.add(node);
    String methodName=codegen.getBodyMethodName(scriptOrFn) + "_literal" + literals.size();
    cfw.addALoad(funObjLocal);
    cfw.addALoad(contextLocal);
    cfw.addALoad(variableObjectLocal);
    cfw.addALoad(thisObjLocal);
    cfw.addALoad(argsLocal);
    cfw.addInvoke(ByteCode.INVOKEVIRTUAL,codegen.mainClassName,methodName,"(Lorg/mozilla/javascript/Context;" + "Lorg/mozilla/javascript/Scriptable;" + "Lorg/mozilla/javascript/Scriptable;"+ "[Ljava/lang/Object;"+ ")Lorg/mozilla/javascript/Scriptable;");
    return;
  }
  addNewObjectArray(count);
  for (int i=0; i != count; ++i) {
    cfw.add(ByteCode.DUP);
    cfw.addPush(i);
    generateExpression(child,node);
    cfw.add(ByteCode.AASTORE);
    child=child.getNext();
  }
  int[] skipIndexes=(int[])node.getProp(Node.SKIP_INDEXES_PROP);
  if (skipIndexes == null) {
    cfw.add(ByteCode.ACONST_NULL);
    cfw.add(ByteCode.ICONST_0);
  }
 else {
    cfw.addPush(OptRuntime.encodeIntArray(skipIndexes));
    cfw.addPush(skipIndexes.length);
  }
  cfw.addALoad(contextLocal);
  cfw.addALoad(variableObjectLocal);
  addOptRuntimeInvoke("newArrayLiteral","([Ljava/lang/Object;" + "Ljava/lang/String;" + "I"+ "Lorg/mozilla/javascript/Context;"+ "Lorg/mozilla/javascript/Scriptable;"+ ")Lorg/mozilla/javascript/Scriptable;");
}
