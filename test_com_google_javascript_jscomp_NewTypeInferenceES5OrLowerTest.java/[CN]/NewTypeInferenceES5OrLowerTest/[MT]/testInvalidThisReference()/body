{
  typeCheck("this.x = 5;",NewTypeInference.GLOBAL_THIS);
  typeCheck("function f(x){}; f(this);");
  typeCheck("function f(){ return this; }");
  typeCheck("function f() { this.p = 1; }",NewTypeInference.GLOBAL_THIS);
  typeCheck("function f() { return this.p; }",NewTypeInference.GLOBAL_THIS);
  typeCheck("function f() { this['p']; }",NewTypeInference.GLOBAL_THIS);
  typeCheck("(function() { this.p; })();",NewTypeInference.GLOBAL_THIS);
  typeCheck(Joiner.on('\n').join("function g(x) {}","g(function() { return this.p; })"));
  typeCheck(Joiner.on('\n').join("/** @constructor */ function Foo(x) {}","new Foo(function() { return this.p; })"));
  typeCheck(Joiner.on('\n').join("/**"," * @template T"," * @param {T} x"," * @this {T}"," */","function f(x) {","  this.p = 123;","}"));
  typeCheck(Joiner.on('\n').join("/** @this {Object} */","function f(pname) {","  var x = this[pname];","}"));
}
