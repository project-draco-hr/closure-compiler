{
  typeCheck(Joiner.on('\n').join("var /** !Promise */ p;","function f(unused) {","  function g(){ return 5; }","  p.then(g);","}"));
  typeCheck(Joiner.on('\n').join("var /** !Promise */ p;","function f(unused) {","  function g(){ return 5; }","  var /** null */ n = p.then(g);","}"),NewTypeInference.MISTYPED_ASSIGN_RHS);
}
