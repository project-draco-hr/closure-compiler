{
  typeCheckCustomExterns(DEFAULT_EXTERNS + Joiner.on('\n').join("/** @interface */","var IThenable = function() {};","IThenable.prototype.then = function(onFulfilled) {};","/** @constructor @implements {IThenable} */","var Promise = function() {};","/**"," * @param {function():RESULT} onFulfilled"," * @template RESULT"," */","Promise.prototype.then = function(onFulfilled) {};"),Joiner.on('\n').join("var /** !Promise */ p;","function f(unused) {","  function g(){ return 5; }","  p.then(g);","}"));
  typeCheckCustomExterns(DEFAULT_EXTERNS + Joiner.on('\n').join("/** @interface */","var IThenable = function() {};","IThenable.prototype.then = function(onFulfilled) {};","/** @constructor @implements {IThenable} */","var Promise = function() {};","/**"," * @param {function():RESULT} onFulfilled"," * @return {RESULT}"," * @template RESULT"," */","Promise.prototype.then = function(onFulfilled) {};"),Joiner.on('\n').join("var /** !Promise */ p;","function f(unused) {","  function g(){ return 5; }","  var /** null */ n = p.then(g);","}"),NewTypeInference.MISTYPED_ASSIGN_RHS);
}
