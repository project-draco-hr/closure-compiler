{
  errorStream=err;
  List<String> processedArgs=processArgs(args);
  Flags.guardLevels.clear();
  List<String> jsFiles=null;
  List<LocationMapping> mappings=null;
  ImmutableMap<String,String> sourceMapInputs=null;
  try {
    flags.parse(processedArgs);
    if (!flags.flagFile.isEmpty()) {
      processFlagFile();
    }
    jsFiles=flags.getJsFiles();
    mappings=flags.getSourceMapLocationMappings();
    sourceMapInputs=flags.getSourceMapInputs();
  }
 catch (  CmdLineException e) {
    reportError(e.getMessage());
  }
catch (  IOException ioErr) {
    reportError("ERROR - " + flags.flagFile + " read error.");
  }
  if (flags.processCommonJsModules) {
    flags.processClosurePrimitives=true;
    flags.manageClosureDependencies=true;
    if (flags.commonJsEntryModule == null) {
      reportError("Please specify --common_js_entry_module.");
    }
    flags.closureEntryPoint=ImmutableList.of(ProcessCommonJSModules.toModuleName(flags.commonJsEntryModule));
  }
  if (flags.outputWrapperFile != null && !flags.outputWrapperFile.isEmpty()) {
    flags.outputWrapper="";
    try {
      flags.outputWrapper=Files.toString(new File(flags.outputWrapperFile),UTF_8);
    }
 catch (    Exception e) {
      reportError("ERROR - invalid output_wrapper_file specified.");
    }
  }
  if (flags.outputWrapper != null && !flags.outputWrapper.isEmpty() && !flags.outputWrapper.contains(CommandLineRunner.OUTPUT_MARKER)) {
    reportError("ERROR - invalid output_wrapper specified. Missing '" + CommandLineRunner.OUTPUT_MARKER + "'.");
  }
  if (errors) {
    flags.printShortUsageAfterErrors(errorStream);
  }
 else   if (flags.displayHelp) {
    flags.printUsage(out);
  }
 else   if (flags.version) {
    out.println("Closure Compiler (http://github.com/google/closure-compiler)\n" + "Version: " + Compiler.getReleaseVersion() + "\n"+ "Built on: "+ Compiler.getReleaseDate());
    out.flush();
  }
 else {
    runCompiler=true;
    CodingConvention conv;
    if (flags.thirdParty) {
      conv=CodingConventions.getDefault();
    }
 else     if (flags.processJqueryPrimitives) {
      conv=new JqueryCodingConvention();
    }
 else {
      conv=new ClosureCodingConvention();
    }
    getCommandLineConfig().setPrintTree(flags.printTree).setPrintAst(flags.printAst).setPrintPassGraph(flags.printPassGraph).setJscompDevMode(flags.jscompDevMode).setLoggingLevel(flags.loggingLevel).setExterns(flags.externs).setJs(jsFiles).setJsOutputFile(flags.jsOutputFile).setModule(flags.module).setVariableMapOutputFile(flags.variableMapOutputFile).setCreateNameMapFiles(flags.createNameMapFiles).setPropertyMapOutputFile(flags.propertyMapOutputFile).setCodingConvention(conv).setSummaryDetailLevel(flags.summaryDetailLevel).setOutputWrapper(flags.outputWrapper).setModuleWrapper(flags.moduleWrapper).setModuleOutputPathPrefix(flags.moduleOutputPathPrefix).setCreateSourceMap(flags.createSourceMap).setSourceMapFormat(flags.sourceMapFormat).setSourceMapLocationMappings(mappings).setSourceMapInputFiles(sourceMapInputs).setWarningGuardSpec(Flags.getWarningGuardSpec()).setDefine(flags.define).setCharset(flags.charset).setManageClosureDependencies(flags.manageClosureDependencies).setOnlyClosureDependencies(flags.onlyClosureDependencies).setClosureEntryPoints(flags.closureEntryPoint).setOutputManifest(ImmutableList.of(flags.outputManifest)).setOutputModuleDependencies(flags.outputModuleDependencies).setLanguageIn(flags.languageIn).setLanguageOut(flags.languageOut).setProcessCommonJSModules(flags.processCommonJsModules).setCommonJSModulePathPrefix(flags.commonJsPathPrefix).setTransformAMDToCJSModules(flags.transformAmdModules).setWarningsWhitelistFile(flags.warningsWhitelistFile).setAngularPass(flags.angularPass).setTracerMode(flags.tracerMode).setNewTypeInference(flags.useNewTypeInference);
  }
  errorStream=null;
}
