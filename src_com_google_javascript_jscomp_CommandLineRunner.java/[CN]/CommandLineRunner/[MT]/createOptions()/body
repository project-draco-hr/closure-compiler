{
  CompilerOptions options=new CompilerOptions();
  options.setCodingConvention(new ClosureCodingConvention());
  CompilationLevel level=flags.compilation_level;
  level.setOptionsForCompilationLevel(options);
  if (flags.debug) {
    level.setDebugOptionsForCompilationLevel(options);
  }
  if (flags.generate_exports) {
    options.setGenerateExports(flags.generate_exports);
  }
  WarningLevel wLevel=flags.warning_level;
  wLevel.setOptionsForWarningLevel(options);
  for (  FormattingOption formattingOption : flags.formatting) {
    formattingOption.applyToOptions(options);
  }
  options.closurePass=flags.process_closure_primitives;
  return options;
}
