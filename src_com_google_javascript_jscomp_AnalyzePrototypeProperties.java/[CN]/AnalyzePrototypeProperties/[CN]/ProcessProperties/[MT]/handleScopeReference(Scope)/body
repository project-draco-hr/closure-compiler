{
  NameContext context=symbolStack.peek();
  while (context != null) {
    context.name.readClosureVariables=true;
    if (context.parent != null && context.parent.scope == scope) {
      break;
    }
    context=context.parent;
  }
  while (context != null && context.resultUsed) {
    context.name.readClosureVariables=true;
    if (context.parent == null || context.parent.name == anonymousNode) {
      break;
    }
    context=context.parent;
  }
}
