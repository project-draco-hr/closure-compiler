{
  Node n=t.getCurrentNode();
  NameContext nameContext;
  if (n.isFunction()) {
    if (isGlobalFunctionDeclaration(t,n)) {
      Node parent=n.getParent();
      String name=parent.isName() ? parent.getString() : n.getFirstChild().getString();
      nameContext=new NameContext(symbolStack.peek(),getNameInfoForName(name,VAR),t.getScope(),false);
    }
 else {
      nameContext=new NameContext(symbolStack.peek(),anonymousNode,t.getScope(),true);
    }
  }
 else {
    Preconditions.checkState(t.inGlobalScope());
    nameContext=new NameContext(null,globalNode,t.getScope(),false);
  }
  symbolStack.push(nameContext);
  scopeStack.push(nameContext);
}
