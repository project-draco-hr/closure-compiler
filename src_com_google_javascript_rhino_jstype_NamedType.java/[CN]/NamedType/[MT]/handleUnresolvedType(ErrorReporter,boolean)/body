{
  if (registry.isLastGeneration()) {
    boolean isForwardDeclared=ignoreForwardReferencedTypes && registry.isForwardDeclaredType(reference);
    if (!isForwardDeclared && registry.isLastGeneration()) {
      t.warning("Bad type annotation. Unknown type " + reference,sourceName,lineno,null,charno);
    }
 else {
      setReferencedType(registry.getNativeObjectType(JSTypeNative.NO_RESOLVED_TYPE));
      if (registry.isLastGeneration() && validator != null) {
        validator.apply(getReferencedType());
      }
    }
    setResolvedTypeInternal(getReferencedType());
  }
 else {
    setResolvedTypeInternal(this);
  }
}
