{
  test("function *f() { function *g() {yield 2;} yield 1; }",Joiner.on('\n').join("/** @suppress {uselessCode} */","function f() {","  var $jscomp$generator$state = 0;","  /** @suppress {uselessCode} */","  function g() {","    var $jscomp$generator$state = 0;","    function $jscomp$generator$impl($jscomp$generator$next$arg,","        $jscomp$generator$throw$arg) {","      while (1) switch ($jscomp$generator$state) {","        case 0:","          $jscomp$generator$state = 1;","           return {value: 2, done: false};","        case 1:","          if (!($jscomp$generator$throw$arg !== undefined)) {","            $jscomp$generator$state = 2; break;","          }","          $jscomp$generator$state = -1;","          throw $jscomp$generator$throw$arg;","        case 2:","          $jscomp$generator$state = -1;","        default:","          return {value: undefined, done: true}","      }","    }","    return {","      $$iterator: function() { return this; },","      next: function(arg){ return $jscomp$generator$impl(arg, undefined); },","      throw: function(arg){ return $jscomp$generator$impl(undefined, arg); },","    }","  }","  function $jscomp$generator$impl($jscomp$generator$next$arg,","      $jscomp$generator$throw$arg) {","    while (1) switch ($jscomp$generator$state) {","      case 0:","        $jscomp$generator$state = 1;","         return {value: 1, done: false};","      case 1:","        if (!($jscomp$generator$throw$arg !== undefined)) {","          $jscomp$generator$state = 2; break;","        }","        $jscomp$generator$state = -1;","        throw $jscomp$generator$throw$arg;","      case 2:","        $jscomp$generator$state = -1;","      default:","        return {value: undefined, done: true}","    }","  }","  return {","    $$iterator: function() { return this; },","    next: function(arg){ return $jscomp$generator$impl(arg, undefined); },","    throw: function(arg){ return $jscomp$generator$impl(undefined, arg); },","  }","}"));
}
