{
  String requireName=require.getSecondChild().getString();
  URI loadAddress=loader.locateCommonJsModule(requireName,t.getInput());
  if (loadAddress == null) {
    compiler.report(t.makeError(require,ES6ModuleLoader.LOAD_ERROR,requireName));
    return;
  }
  String moduleName=ES6ModuleLoader.toModuleName(loadAddress);
  Node script=getCurrentScriptNode(parent);
  if (!NodeUtil.isExpressionResultUsed(require) && parent.isExprResult() && NodeUtil.isStatementBlock(parent.getParent())) {
    parent.getParent().removeChild(parent);
  }
 else {
    Node moduleRef=IR.name(moduleName).srcref(require);
    parent.replaceChild(require,moduleRef);
  }
  if (reportDependencies) {
    t.getInput().addRequire(moduleName);
  }
  script.addChildToFront(IR.exprResult(IR.call(IR.getprop(IR.name("goog"),IR.string("require")),IR.string(moduleName))).useSourceInfoIfMissingFromForTree(require));
  compiler.reportCodeChange();
}
