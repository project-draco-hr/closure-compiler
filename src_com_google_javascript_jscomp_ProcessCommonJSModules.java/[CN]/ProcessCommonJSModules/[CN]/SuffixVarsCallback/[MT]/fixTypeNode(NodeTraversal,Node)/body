{
  if (typeNode.isString()) {
    String name=typeNode.getString();
    if (ES6ModuleLoader.isRelativeIdentifier(name)) {
      int lastSlash=name.lastIndexOf('/');
      int endIndex=name.indexOf('.',lastSlash);
      String localTypeName=null;
      if (endIndex == -1) {
        endIndex=name.length();
      }
 else {
        localTypeName=name.substring(endIndex);
      }
      String moduleName=name.substring(0,endIndex);
      String loadAddress=loader.locate(moduleName,t.getInput());
      if (loadAddress == null) {
        t.makeError(typeNode,ES6ModuleLoader.LOAD_ERROR,moduleName);
        return;
      }
      String globalModuleName=toModuleName(loadAddress);
      typeNode.setString(localTypeName == null ? globalModuleName : globalModuleName + localTypeName);
    }
 else {
      int endIndex=name.indexOf('.');
      if (endIndex == -1) {
        endIndex=name.length();
      }
      String baseName=name.substring(0,endIndex);
      Var var=t.getScope().getVar(baseName);
      if (var != null && var.isGlobal()) {
        typeNode.setString(baseName + "$$" + suffix+ name.substring(endIndex));
        typeNode.putProp(Node.ORIGINALNAME_PROP,name);
      }
    }
  }
  for (Node child=typeNode.getFirstChild(); child != null; child=child.getNext()) {
    fixTypeNode(t,child);
  }
}
