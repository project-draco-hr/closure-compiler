{
  List<SourceFile> inputs=Lists.newArrayList(SourceFile.fromCode("gin.js","require('tonic')"),SourceFile.fromCode("tonic.js",""),SourceFile.fromCode("mix.js","require('gin'); require('tonic');"));
  List<String> entryPoints=Lists.newArrayList("module$mix");
  Compiler compiler=initCompilerForCommonJS(inputs,entryPoints);
  JSModuleGraph graph=compiler.getModuleGraph();
  assertEquals(4,graph.getModuleCount());
  List<CompilerInput> result=graph.manageDependencies(entryPoints,compiler.getInputsForTesting());
  assertEquals("[root]",result.get(0).getName());
  assertEquals("[module$tonic]",result.get(1).getName());
  assertEquals("[module$gin]",result.get(2).getName());
  assertEquals("tonic.js",result.get(3).getName());
  assertEquals("gin.js",result.get(4).getName());
  assertEquals("mix.js",result.get(5).getName());
}
