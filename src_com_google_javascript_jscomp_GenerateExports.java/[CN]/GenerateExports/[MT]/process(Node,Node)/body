{
  FindExportableNodes findExportableNodes=new FindExportableNodes(compiler,allowNonGlobalExports);
  NodeTraversal.traverse(compiler,root,findExportableNodes);
  Map<String,GenerateNodeContext> exports=findExportableNodes.getExports();
  for (  Map.Entry<String,GenerateNodeContext> entry : exports.entrySet()) {
    String export=entry.getKey();
    GenerateNodeContext context=entry.getValue();
    if (context.getMode() == Mode.EXPORT) {
      addExportMethod(exports,export,context);
    }
 else     if (context.getMode() == Mode.EXTERN) {
      addExtern(export);
    }
  }
}
