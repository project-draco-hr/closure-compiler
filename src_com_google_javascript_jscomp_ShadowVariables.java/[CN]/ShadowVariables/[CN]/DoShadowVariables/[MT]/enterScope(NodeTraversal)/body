{
  Scope s=t.getScope();
  if (!s.isLocal()) {
    return;
  }
  if (s.getParent().isGlobal()) {
    return;
  }
  for (  Var var : s.getVarIterable()) {
    if (var.isBleedingFunction()) {
      continue;
    }
    if (compiler.getCodingConvention().isExported(var.name,s.isLocal())) {
      continue;
    }
    Assignment bestShadow=findBestShadow(s);
    if (bestShadow == null) {
      continue;
    }
    Assignment localAssignment=assignments.get(var.getName());
    if (bestShadow.count < localAssignment.count) {
      continue;
    }
    doShadow(localAssignment,bestShadow,var);
    if (oldPseudoNameMap != null) {
      String targetPseudoName=oldPseudoNameMap.get(s.getVar(bestShadow.oldName).nameNode);
      for (      Node use : varToNameUsage.get(var)) {
        deltaPseudoNameMap.put(use,targetPseudoName);
      }
    }
  }
}
