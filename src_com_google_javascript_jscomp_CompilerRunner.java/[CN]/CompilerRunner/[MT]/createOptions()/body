{
  CompilerOptions options=new CompilerOptions();
  options.setCodingConvention(new ClosureCodingConvention());
  CompilationLevel level=FLAG_compilation_level.get();
  level.setOptionsForCompilationLevel(options);
  WarningLevel wLevel=FLAG_warning_level.get();
  wLevel.setOptionsForWarningLevel(options);
  for (  FormattingOption formattingOption : FLAG_formatting.get()) {
    formattingOption.applyToOptions(options);
  }
  if (FLAG_process_closure_primitives.get()) {
    options.closurePass=true;
  }
  initOptionsFromFlags(options);
  return options;
}
