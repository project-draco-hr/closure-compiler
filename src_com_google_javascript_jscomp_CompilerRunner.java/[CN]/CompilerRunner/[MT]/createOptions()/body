{
  CompilerOptions options=new CompilerOptions();
  CompilationLevel level=FLAG_compilation_level.get();
  level.setOptionsForCompilationLevel(options);
  for (  FormattingOption formattingOption : FLAG_formatting.get()) {
    formattingOption.applyToOptions(options);
  }
  if (FLAG_process_closure_primitives.get()) {
    options.closurePass=true;
  }
  return options;
}
