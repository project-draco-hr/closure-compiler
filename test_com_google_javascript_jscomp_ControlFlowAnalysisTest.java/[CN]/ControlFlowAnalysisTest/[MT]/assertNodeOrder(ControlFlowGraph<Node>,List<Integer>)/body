{
  List<DiGraphNode<Node,Branch>> cfgNodes=Lists.newArrayList(cfg.getDirectedGraphNodes());
  Collections.sort(cfgNodes,cfg.getOptionalNodeComparator(true));
  Node implicitReturn=cfgNodes.remove(cfgNodes.size() - 1).getValue();
  assertNull(implicitReturn == null ? "null" : implicitReturn.toStringTree(),implicitReturn);
  assertEquals("Wrong number of CFG nodes",nodeTypes.size(),cfgNodes.size());
  for (int i=0; i < cfgNodes.size(); i++) {
    int expectedType=nodeTypes.get(i);
    int actualType=cfgNodes.get(i).getValue().getType();
    assertEquals("Node type mismatch at " + i + ".\n"+ "found   : "+ Token.name(actualType)+ "\n"+ "required: "+ Token.name(expectedType)+ "\n",expectedType,actualType);
  }
}
