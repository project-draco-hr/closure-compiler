{
  if (serializedMap == null || serializedMap.isEmpty()) {
    return Collections.emptyMap();
  }
  Map<String,BiMap<String,String>> resultMap=Maps.newHashMap();
  BufferedReader reader=new BufferedReader(new StringReader(serializedMap));
  BiMap<String,String> currentSectionMap=null;
  String line;
  int lineIndex=0;
  try {
    while ((line=reader.readLine()) != null) {
      lineIndex++;
      if (line.isEmpty()) {
        continue;
      }
      if (line.charAt(0) == '[') {
        String currentSection=line.substring(1,line.length() - 1);
        currentSectionMap=resultMap.get(currentSection);
        if (currentSectionMap == null) {
          currentSectionMap=HashBiMap.create();
          resultMap.put(currentSection,currentSectionMap);
        }
 else {
          reportInvalidLine(line,lineIndex);
          return Collections.emptyMap();
        }
      }
 else {
        int split=line.indexOf(':');
        if (split != -1) {
          String name=line.substring(0,split);
          String location=line.substring(split + 1,line.length());
          currentSectionMap.put(name,location);
        }
 else {
          reportInvalidLine(line,lineIndex);
          return Collections.emptyMap();
        }
      }
    }
  }
 catch (  IOException e) {
    JSError.make(INVALID_GENERATOR_ID_MAPPING,e.getMessage());
  }
  return resultMap;
}
