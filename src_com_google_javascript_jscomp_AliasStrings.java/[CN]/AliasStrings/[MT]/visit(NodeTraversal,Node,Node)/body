{
  if (n.getType() == Token.STRING && parent.getType() != Token.GETPROP && parent.getType() != Token.REGEXP && !NodeUtil.isObjectLitKey(n,parent)) {
    String str=n.getString();
    if ("undefined".equals(str)) {
      return;
    }
    if (blacklist != null && blacklist.reset(str).find()) {
      return;
    }
    if (aliasableStrings == null || aliasableStrings.contains(str)) {
      StringOccurrence occurrence=new StringOccurrence(n,parent);
      StringInfo info=getOrCreateStringInfo(str);
      info.occurrences.add(occurrence);
      info.numOccurrences++;
      if (t.inGlobalScope() || isInThrowExpression(n)) {
        info.numOccurrencesInfrequentlyExecuted++;
      }
      if (info.numOccurrences == 1) {
        info.moduleToContainDecl=t.getModule();
        Node prev=n;
        for (        Node ancestor : n.getAncestors()) {
          if (ancestor.getType() == Token.SCRIPT) {
            info.parentForNewVarDecl=ancestor;
            info.siblingToInsertVarDeclBefore=prev;
            break;
          }
          prev=ancestor;
        }
      }
 else {
        JSModule module=t.getModule();
        if (module != null && info.moduleToContainDecl != null && module != info.moduleToContainDecl && !moduleGraph.dependsOn(module,info.moduleToContainDecl)) {
          module=moduleGraph.getDeepestCommonDependency(module,info.moduleToContainDecl);
          Node varParent=moduleVarParentMap.get(module);
          if (varParent == null) {
            varParent=compiler.getNodeForCodeInsertion(module);
            moduleVarParentMap.put(module,varParent);
          }
          info.moduleToContainDecl=module;
          info.parentForNewVarDecl=varParent;
          info.siblingToInsertVarDeclBefore=varParent.getFirstChild();
        }
      }
    }
  }
}
