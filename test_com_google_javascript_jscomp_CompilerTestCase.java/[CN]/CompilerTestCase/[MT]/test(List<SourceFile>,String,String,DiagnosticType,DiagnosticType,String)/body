{
  Compiler compiler=createCompiler();
  lastCompiler=compiler;
  CompilerOptions options=getOptions();
  if (this.acceptES5) {
    options.setLanguageIn(LanguageMode.ECMASCRIPT5);
  }
  options.checkTypes=parseTypeInfo;
  compiler.init(externs,ImmutableList.of(SourceFile.fromCode(filename,js)),options);
  BaseJSTypeTestCase.addNativeProperties(compiler.getTypeRegistry());
  test(compiler,maybeCreateArray(expected),error,warning,description);
}
