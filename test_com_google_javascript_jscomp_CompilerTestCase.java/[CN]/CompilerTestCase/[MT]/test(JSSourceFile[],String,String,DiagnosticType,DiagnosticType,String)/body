{
  Compiler compiler=createCompiler();
  lastCompiler=compiler;
  CompilerOptions options=getOptions();
  if (this.acceptES5) {
    options.setLanguageIn(LanguageMode.ECMASCRIPT5);
  }
  options.checkTypes=parseTypeInfo;
  compiler.init(externs,new JSSourceFile[]{JSSourceFile.fromCode(filename,js)},options);
  BaseJSTypeTestCase.addNativeProperties(compiler.getTypeRegistry());
  test(compiler,new String[]{expected},error,warning,description);
}
