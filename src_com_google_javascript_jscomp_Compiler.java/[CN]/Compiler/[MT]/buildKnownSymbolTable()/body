{
  SymbolTable symbolTable=new SymbolTable(getTypeRegistry());
  MemoizedScopeCreator typedScopeCreator=getTypedScopeCreator();
  if (typedScopeCreator != null) {
    symbolTable.addSymbolsFrom(typedScopeCreator);
  }
  GlobalNamespace globalNamespace=ensureDefaultPassConfig().getGlobalNamespace();
  if (globalNamespace != null) {
    symbolTable.addSymbolsFrom(globalNamespace);
  }
  ReferenceCollectingCallback refCollector=new ReferenceCollectingCallback(this,ReferenceCollectingCallback.DO_NOTHING_BEHAVIOR);
  NodeTraversal.traverse(this,getRoot(),refCollector);
  symbolTable.addSymbolsFrom(refCollector);
  PreprocessorSymbolTable preprocessorSymbolTable=ensureDefaultPassConfig().getPreprocessorSymbolTable();
  if (preprocessorSymbolTable != null) {
    symbolTable.addSymbolsFrom(preprocessorSymbolTable);
  }
  symbolTable.fillNamespaceReferences();
  symbolTable.fillThisReferences(this,externsRoot,jsRoot);
  symbolTable.fillPropertySymbols(this,externsRoot,jsRoot);
  return symbolTable;
}
