{
  IntermediateState state=new IntermediateState();
  state.externsRoot=externsRoot;
  state.jsRoot=jsRoot;
  state.externs=externs;
  state.inputs=inputs;
  state.modules=modules;
  state.passConfigState=getPassConfig().getIntermediateState();
  state.typeRegistry=typeRegistry;
  state.lifeCycleStage=getLifeCycleStage();
  state.injectedLibraries=Maps.newLinkedHashMap(injectedLibraries);
  return state;
}
