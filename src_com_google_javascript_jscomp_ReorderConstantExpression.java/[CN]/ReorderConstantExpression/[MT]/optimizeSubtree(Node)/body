{
  if (NodeUtil.isSymmetricOperation(subtree) || NodeUtil.isRelationalOperation(subtree)) {
    int type=subtree.getType();
    int leftType=subtree.getFirstChild().getType();
    if (type != leftType && NodeUtil.precedence(type) == NodeUtil.precedence(leftType)) {
      return subtree;
    }
    if (NodeUtil.isImmutableValue(subtree.getLastChild()) && !NodeUtil.isImmutableValue(subtree.getFirstChild())) {
      if (NodeUtil.isRelationalOperation(subtree)) {
        int inverseOperator=NodeUtil.getInverseOperator(subtree.getType());
        subtree.setType(inverseOperator);
      }
      Node firstNode=subtree.getFirstChild().detachFromParent();
      Node lastNode=subtree.getLastChild().detachFromParent();
      subtree.addChildrenToFront(lastNode);
      subtree.addChildrenToBack(firstNode);
      reportCodeChange();
    }
  }
  return subtree;
}
