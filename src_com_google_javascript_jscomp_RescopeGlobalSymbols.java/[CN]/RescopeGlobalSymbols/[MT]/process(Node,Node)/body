{
  if (addExtern) {
    addExternForGlobalSymbolNamespace();
  }
  NodeTraversal.traverse(compiler,root,new RewriteGlobalFunctionStatementsToVarAssignmentsCallback());
  NodeTraversal.traverse(compiler,root,new FindCrossModuleNamesCallback());
  NodeTraversal.traverse(compiler,root,new RewriteScopeCallback());
  NodeTraversal.traverse(compiler,root,new RemoveGlobalVarCallback());
  NodeTraversal.traverse(compiler,root,new MakeExternsReferenceWindowExplicitly());
}
