{
  ScopeCreator scopeCreator=createScopeCreator();
  if (!sanityCheck) {
    NodeTraversal.traverseEs6(compiler,externs,new NameRefInExternsCheck());
  }
  NodeTraversal t=new NodeTraversal(compiler,this,scopeCreator);
  t.traverseRoots(externs,root);
  for (  String varName : varsToDeclareInExterns) {
    createSynthesizedExternVar(varName);
  }
}
