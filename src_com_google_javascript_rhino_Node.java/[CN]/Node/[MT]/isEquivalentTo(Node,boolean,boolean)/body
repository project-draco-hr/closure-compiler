{
  if (type != node.getType() || getChildCount() != node.getChildCount() || this.getClass() != node.getClass()) {
    return false;
  }
  if (compareJsType && !JSType.isEquivalent(jsType,node.getJSType())) {
    return false;
  }
  if (type == Token.INC || type == Token.DEC) {
    int post1=this.getIntProp(INCRDECR_PROP);
    int post2=node.getIntProp(INCRDECR_PROP);
    if (post1 != post2) {
      return false;
    }
  }
 else   if (type == Token.STRING) {
    int quoted1=this.getIntProp(QUOTED_PROP);
    int quoted2=node.getIntProp(QUOTED_PROP);
    if (quoted1 != quoted2) {
      return false;
    }
  }
 else   if (type == Token.CALL) {
    if (this.getBooleanProp(FREE_CALL) != node.getBooleanProp(FREE_CALL)) {
      return false;
    }
  }
  if (recurse) {
    Node n, n2;
    for (n=first, n2=node.first; n != null; n=n.next, n2=n2.next) {
      if (!n.isEquivalentTo(n2,compareJsType,true)) {
        return false;
      }
    }
  }
  return true;
}
