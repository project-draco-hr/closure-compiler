{
  if (node.isFunction()) {
    return;
  }
  for (  Node child : node.children()) {
    if (child.isThis()) {
      Node newName=Node.newString(Token.NAME,name);
      newName.setJSType(child.getJSType());
      node.replaceChild(child,newName);
    }
 else {
      replaceReferencesToThis(child,name);
    }
  }
}
