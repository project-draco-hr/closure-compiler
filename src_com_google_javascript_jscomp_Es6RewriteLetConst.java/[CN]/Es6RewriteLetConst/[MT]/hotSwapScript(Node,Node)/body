{
  NodeTraversal.traverse(compiler,scriptRoot,this);
  NodeTraversal.traverse(compiler,scriptRoot,new RenameReferences());
  LoopClosureTransformer transformer=new LoopClosureTransformer();
  NodeTraversal.traverse(compiler,scriptRoot,transformer);
  transformer.transformLoopClosure();
  if (!blockScopedDeclarations.isEmpty()) {
    for (    Node n : blockScopedDeclarations) {
      n.setType(Token.VAR);
    }
    compiler.reportCodeChange();
  }
  NodeTraversal.traverse(compiler,scriptRoot,new RewriteBlockScopedFunctionDeclaration());
}
