{
  NodeTraversal.traverseRoots(compiler,Lists.newArrayList(externs,root),this);
  NodeTraversal.traverseRoots(compiler,Lists.newArrayList(externs,root),new RenameReferences());
  LoopClosureTransformer transformer=new LoopClosureTransformer();
  NodeTraversal.traverseRoots(compiler,Lists.newArrayList(externs,root),transformer);
  transformer.transformLoopClosure();
  if (!letConsts.isEmpty()) {
    for (    Node n : letConsts) {
      n.setType(Token.VAR);
    }
    compiler.reportCodeChange();
  }
}
