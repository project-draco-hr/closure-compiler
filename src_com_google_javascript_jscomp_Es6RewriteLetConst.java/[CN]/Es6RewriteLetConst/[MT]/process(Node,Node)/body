{
  NodeTraversal.traverseRoots(compiler,new CollectUndeclaredNames(),externs,root);
  NodeTraversal.traverseRoots(compiler,this,externs,root);
  NodeTraversal.traverseRoots(compiler,new RenameReferences(),externs,root);
  LoopClosureTransformer transformer=new LoopClosureTransformer();
  NodeTraversal.traverseRoots(compiler,transformer,externs,root);
  transformer.transformLoopClosure();
  varify();
  NodeTraversal.traverseRoots(compiler,new RewriteBlockScopedFunctionDeclaration(),externs,root);
}
