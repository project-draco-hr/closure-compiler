{
  NodeTraversal.traverseRoots(compiler,Lists.newArrayList(externs,root),new CollectUndeclaredNames());
  NodeTraversal.traverseRoots(compiler,Lists.newArrayList(externs,root),this);
  NodeTraversal.traverseRoots(compiler,Lists.newArrayList(externs,root),new RenameReferences());
  LoopClosureTransformer transformer=new LoopClosureTransformer();
  NodeTraversal.traverseRoots(compiler,Lists.newArrayList(externs,root),transformer);
  transformer.transformLoopClosure();
  varify();
  NodeTraversal.traverseRoots(compiler,Lists.newArrayList(externs,root),new RewriteBlockScopedFunctionDeclaration());
}
