{
  Object callbackArg=args.length > 0 ? args[0] : Undefined.instance;
  if (callbackArg == null || !(callbackArg instanceof Function)) {
    throw ScriptRuntime.notFunctionError(callbackArg);
  }
  Function f=(Function)callbackArg;
  Scriptable parent=ScriptableObject.getTopLevelScope(f);
  long length=getLengthProperty(cx,thisObj);
  boolean movingLeft=id == Id_reduce;
  Object value=args.length > 1 ? args[1] : Scriptable.NOT_FOUND;
  for (long i=0; i < length; i++) {
    long index=movingLeft ? i : (length - 1 - i);
    Object elem=getRawElem(thisObj,index);
    if (elem == Scriptable.NOT_FOUND) {
      continue;
    }
    if (value == Scriptable.NOT_FOUND) {
      value=elem;
    }
 else {
      Object[] innerArgs={value,elem,index,thisObj};
      value=f.call(cx,parent,parent,innerArgs);
    }
  }
  if (value == Scriptable.NOT_FOUND) {
    throw ScriptRuntime.typeError0("msg.empty.array.reduce");
  }
  return value;
}
