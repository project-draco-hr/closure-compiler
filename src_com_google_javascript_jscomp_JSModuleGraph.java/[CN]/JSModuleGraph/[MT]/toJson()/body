{
  JSONArray modules=new JSONArray();
  for (  JSModule module : getAllModules()) {
    JSONObject node=new JSONObject();
    try {
      node.put("name",module.getName());
      JSONArray deps=new JSONArray();
      node.put("dependencies",deps);
      for (      JSModule m : module.getDependencies()) {
        deps.put(m.getName());
      }
      JSONArray transitiveDeps=new JSONArray();
      node.put("transitive-dependencies",transitiveDeps);
      for (      JSModule m : getTransitiveDepsDeepestFirst(module)) {
        transitiveDeps.put(m.getName());
      }
      JSONArray inputs=new JSONArray();
      node.put("inputs",inputs);
      for (      CompilerInput input : module.getInputs()) {
        inputs.put(input.getSourceFile().getOriginalPath());
      }
      modules.put(node);
    }
 catch (    JSONException e) {
      Throwables.propagate(e);
    }
  }
  return modules;
}
