{
  while (name.parent != null && name.parent.globalSets + name.parent.localSets == 0) {
    name=name.parent;
  }
  Node parent=ref.node.getParent();
  if (parent.getType() == Token.EXPR_RESULT) {
    JSDocInfo info=ref.node.getJSDocInfo();
    if (info != null && info.hasTypedefType()) {
      return;
    }
  }
  compiler.report(JSError.make(ref.getSourceName(),ref.node,level,UNDEFINED_NAME_WARNING,name.fullName()));
}
