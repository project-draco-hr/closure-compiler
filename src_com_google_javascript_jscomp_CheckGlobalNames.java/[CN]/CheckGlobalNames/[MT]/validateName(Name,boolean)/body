{
  Ref declaration=name.declaration;
  Name parent=name.parent;
  if (isDefined && declaration != null && parent != null && parent.declaration != null && parent.localSets == 0 && parent.declaration.preOrderIndex > declaration.preOrderIndex) {
    compiler.report(JSError.make(declaration.source.getName(),declaration.node,NAME_DEFINED_LATE_WARNING,parent.fullName()));
  }
  JSModuleGraph moduleGraph=compiler.getModuleGraph();
  for (  Ref ref : name.getRefs()) {
    if (!isDefined) {
      reportRefToUndefinedName(name,ref);
    }
 else {
      if (declaration != null && ref.getModule() != declaration.getModule() && !moduleGraph.dependsOn(ref.getModule(),declaration.getModule())) {
        reportBadModuleReference(name,ref);
      }
    }
  }
}
