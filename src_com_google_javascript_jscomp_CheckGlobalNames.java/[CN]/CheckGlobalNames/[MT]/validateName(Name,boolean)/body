{
  Ref declaration=name.declaration;
  Name parent=name.parent;
  boolean singleGlobalParentDecl=parent != null && parent.declaration != null && parent.localSets == 0;
  JSModuleGraph moduleGraph=compiler.getModuleGraph();
  for (  Ref ref : name.getRefs()) {
    if (!isDefined && !isTypedef(ref)) {
      reportRefToUndefinedName(name,ref);
    }
 else     if (declaration != null && ref.getModule() != declaration.getModule() && !moduleGraph.dependsOn(ref.getModule(),declaration.getModule())) {
      reportBadModuleReference(name,ref);
    }
 else     if (ref.scope.isGlobal() && singleGlobalParentDecl && parent.declaration.preOrderIndex > ref.preOrderIndex) {
      compiler.report(JSError.make(ref.source.getName(),ref.node,NAME_DEFINED_LATE_WARNING,name.fullName(),parent.fullName(),parent.declaration.source.getName(),String.valueOf(parent.declaration.node.getLineno())));
    }
  }
}
