{
  Ref declaration=name.declaration;
  if (!isDefined) {
    if (declaration != null) {
      reportRefToUndefinedName(name,declaration);
    }
  }
  JSModuleGraph moduleGraph=compiler.getModuleGraph();
  for (  Ref ref : name.getRefs()) {
    if (ref == name.declaration) {
      continue;
    }
    if (!isDefined) {
      reportRefToUndefinedName(name,ref);
    }
 else {
      if (declaration != null && ref.getModule() != declaration.getModule() && !moduleGraph.dependsOn(ref.getModule(),declaration.getModule())) {
        reportBadModuleReference(name,ref);
      }
    }
  }
}
