{
  String message=unexpectedException.getMessage();
  if (!sourceName.isEmpty()) {
    int lineNumber=curNode == null ? -1 : curNode.getLineno();
    message=unexpectedException.getMessage() + "\n" + "  Node: "+ formatNodePosition(curNode)+ (curNode == null ? "" : "  Parent: " + formatNodePosition(curNode.getParent()));
  }
  compiler.throwInternalError(message,unexpectedException);
}
