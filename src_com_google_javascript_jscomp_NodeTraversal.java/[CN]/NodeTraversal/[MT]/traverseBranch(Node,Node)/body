{
  int type=n.getType();
  if (type == Token.SCRIPT) {
    sourceName=getSourceName(n);
  }
  curNode=n;
  if (!callback.shouldTraverse(this,n,parent))   return;
switch (type) {
case Token.CATCH:
    Preconditions.checkState(n.getChildCount() == 3);
  Preconditions.checkState(n.getFirstChild().getType() == Token.NAME);
traverseBranch(n.getFirstChild(),n);
traverseBranch(n.getFirstChild().getNext().getNext(),n);
break;
case Token.FUNCTION:
traverseFunction(n,parent);
break;
default :
for (Node child=n.getFirstChild(); child != null; ) {
Node next=child.getNext();
traverseBranch(child,n);
child=next;
}
break;
}
curNode=n;
callback.visit(this,n,parent);
}
