{
  if (!quietly && scopeCallback != null) {
    scopeCallback.exitScope(this);
  }
  Node scopeRoot;
  if (scopeRoots.isEmpty()) {
    scopeRoot=scopes.pop().getRootNode();
  }
 else {
    scopeRoot=scopeRoots.pop();
  }
  if (NodeUtil.isValidCfgRoot(scopeRoot)) {
    cfgs.pop();
    if (!cfgRoots.isEmpty()) {
      Preconditions.checkState(cfgRoots.pop() == scopeRoot);
    }
  }
  if (hasScope()) {
    compiler.setScope(getScopeRoot());
  }
}
