{
  JvmMetrics.maybeWriteJvmMetrics(pstr,"verbose:pretty:all");
  OutputStreamWriter output=new OutputStreamWriter(pstr);
  try {
    int runtime=0;
    int runs=0;
    int changes=0;
    int diff=0;
    int gzDiff=0;
    output.write("Summary:\n");
    output.write("pass,runtime,runs,changingRuns,reduction,gzReduction\n");
    ArrayList<Entry<String,Stats>> a=new ArrayList<Entry<String,Stats>>();
    for (    Entry<String,Stats> entry : summary.entrySet()) {
      a.add(entry);
    }
    Collections.sort(a,new CmpEntries());
    for (    Entry<String,Stats> entry : a) {
      String key=entry.getKey();
      Stats stats=entry.getValue();
      output.write(key);
      output.write(",");
      output.write(String.valueOf(stats.runtime));
      runtime+=stats.runtime;
      output.write(",");
      output.write(String.valueOf(stats.runs));
      runs+=stats.runs;
      output.write(",");
      output.write(String.valueOf(stats.changes));
      changes+=stats.changes;
      output.write(",");
      output.write(String.valueOf(stats.diff));
      diff+=stats.diff;
      output.write(",");
      output.write(String.valueOf(stats.gzDiff));
      gzDiff+=stats.gzDiff;
      output.write("\n");
    }
    output.write("TOTAL");
    output.write(",");
    output.write(String.valueOf(runtime));
    output.write(",");
    output.write(String.valueOf(runs));
    output.write(",");
    output.write(String.valueOf(changes));
    output.write(",");
    output.write(String.valueOf(diff));
    output.write(",");
    output.write(String.valueOf(gzDiff));
    output.write("\n");
    output.write("\n");
    output.write("Log:\n");
    output.write("pass,runtime,runs,changingRuns,reduction,gzReduction,size,gzSize\n");
    for (    Stats stats : log) {
      output.write(stats.pass);
      output.write(",");
      output.write(String.valueOf(stats.runtime));
      output.write(",");
      output.write(String.valueOf(stats.runs));
      output.write(",");
      output.write(String.valueOf(stats.changes));
      output.write(",");
      output.write(String.valueOf(stats.diff));
      output.write(",");
      output.write(String.valueOf(stats.gzDiff));
      output.write(",");
      output.write(String.valueOf(stats.size));
      output.write(",");
      output.write(String.valueOf(stats.gzSize));
      output.write("\n");
    }
    output.write("\n");
    output.close();
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
}
