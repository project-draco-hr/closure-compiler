{
  ConcreteFunctionType fun1=createFunction("fun1");
  ConcreteFunctionType fun2=createFunction("fun2");
  ConcreteInstanceType obj1=fun1.getInstanceType();
  ConcreteInstanceType obj2=fun2.getInstanceType();
  ConcreteType union1=fun1.unionWith(obj1);
  ConcreteType union2=union1.unionWith(fun2).unionWith(obj2);
  assertEqualSets(Lists.newArrayList(),NONE.getFunctions());
  assertEqualSets(Lists.newArrayList(),NONE.getInstances());
  assertEqualSets(Lists.newArrayList(fun1),fun1.getFunctions());
  assertEqualSets(Lists.newArrayList(),fun1.getInstances());
  assertEqualSets(Lists.newArrayList(),obj1.getFunctions());
  assertEqualSets(Lists.newArrayList(obj1),obj1.getInstances());
  assertEqualSets(Lists.newArrayList(fun1),union1.getFunctions());
  assertEqualSets(Lists.newArrayList(obj1),union1.getInstances());
  assertEqualSets(Lists.newArrayList(fun1,fun2),union2.getFunctions());
  assertEqualSets(Lists.newArrayList(obj1,obj2),union2.getInstances());
}
