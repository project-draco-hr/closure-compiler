{
  Preconditions.checkNotNull(type);
  if (lvalue.isName()) {
    return envPutType(env,lvalue.getString(),type);
  }
 else   if (lvalue.isVar()) {
    Preconditions.checkState(NodeUtil.isForIn(lvalue.getParent()));
    return envPutType(env,lvalue.getFirstChild().getString(),type);
  }
  Preconditions.checkState(lvalue.isGetProp() || lvalue.isGetElem());
  if (qname != null) {
    String objName=qname.getLeftmostName();
    QualifiedName props=qname.getAllButLeftmost();
    JSType objType=envGetType(env,objName);
    env=envPutType(env,objName,objType.withProperty(props,type));
  }
  return env;
}
