{
  if (NodeUtil.isEnumDecl(objLit.getParent().getParent())) {
    if (objLit.getFirstChild() == null) {
      return new EnvTypePair(outEnv,requiredType);
    }
    String pname=NodeUtil.getObjectLitKeyName(objLit.getFirstChild());
    JSType enumeratedType=requiredType.getProp(new QualifiedName(pname)).getEnumeratedType();
    if (enumeratedType == null) {
      return new EnvTypePair(outEnv,requiredType);
    }
    TypeEnv env=outEnv;
    for (Node prop=objLit.getLastChild(); prop != null; prop=objLit.getChildBefore(prop)) {
      env=analyzeExprBwd(prop.getFirstChild(),env,enumeratedType).env;
    }
    return new EnvTypePair(env,requiredType);
  }
  TypeEnv env=outEnv;
  JSType result=pickReqObjType(objLit);
  for (Node prop=objLit.getLastChild(); prop != null; prop=objLit.getChildBefore(prop)) {
    QualifiedName pname=new QualifiedName(NodeUtil.getObjectLitKeyName(prop));
    if (prop.isGetterDef() || prop.isSetterDef()) {
      env=analyzeExprBwd(prop.getFirstChild(),env).env;
    }
 else {
      JSType jsdocType=symbolTable.getPropDeclaredType(prop);
      JSType reqPtype;
      if (jsdocType != null) {
        reqPtype=jsdocType;
      }
 else       if (requiredType.mayHaveProp(pname)) {
        reqPtype=requiredType.getProp(pname);
      }
 else {
        reqPtype=JSType.UNKNOWN;
      }
      EnvTypePair pair=analyzeExprBwd(prop.getFirstChild(),env,reqPtype);
      result=result.withProperty(pname,pair.type);
      env=pair.env;
    }
  }
  return new EnvTypePair(env,result);
}
