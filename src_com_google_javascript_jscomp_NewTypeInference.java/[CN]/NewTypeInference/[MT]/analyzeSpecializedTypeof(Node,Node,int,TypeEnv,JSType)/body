{
  EnvTypePair pair;
  Node typeofRand=typeof.getFirstChild();
  JSType comparedType=getTypeFromString(typeString);
  checkInvalidTypename(typeString);
  if (comparedType.isUnknown()) {
    pair=analyzeExprFwd(typeofRand,inEnv);
    pair=analyzeExprFwd(typeString,pair.env);
  }
 else   if ((specializedType.isTruthy() && (comparisonOp == Token.SHEQ || comparisonOp == Token.EQ)) || (specializedType.isFalsy() && (comparisonOp == Token.SHNE || comparisonOp == Token.NE))) {
    pair=analyzeExprFwd(typeofRand,inEnv,JSType.UNKNOWN,comparedType);
  }
 else {
    pair=analyzeExprFwd(typeofRand,inEnv);
    pair=analyzeExprFwd(typeofRand,inEnv,JSType.UNKNOWN,pair.type.removeType(comparedType));
  }
  pair.type=specializedType.toBoolean();
  return pair;
}
