{
  Node receiver=expr.getFirstChild();
  Node index=expr.getLastChild();
  JSType reqObjType=pickReqObjType(expr);
  EnvTypePair pair=analyzeExprBwd(receiver,outEnv,reqObjType);
  if (isArrayType(pair.type)) {
    pair=analyzeExprBwd(index,pair.env,JSType.NUMBER);
    pair.type=requiredType;
    return pair;
  }
  if (index.isString()) {
    return analyzePropAccessBwd(receiver,index.getString(),outEnv,requiredType);
  }
  pair=analyzeExprBwd(index,outEnv);
  pair=analyzeExprBwd(receiver,pair.env,reqObjType);
  pair.type=requiredType;
  return pair;
}
