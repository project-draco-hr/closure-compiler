{
  Node nested=buildConditional(buildEqtypePredicate(buildTypeVariable("T"),buildTypeVariable("T")),buildTypePredicate("string"),buildTypePredicate("number"));
  Node ttlExp=buildConditional(buildEqtypePredicate(nested,buildTypePredicate("string")),buildTypePredicate("string"),buildTypePredicate("number"));
  ImmutableMap<String,JSType> typeVars=ImmutableMap.of("T",NUMBER_TYPE);
  assertTypeEquals(STRING_TYPE,transform(ttlExp,typeVars));
}
