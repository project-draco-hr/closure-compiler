{
  Preconditions.checkNotNull(templateKeys);
  Preconditions.checkNotNull(templateValues);
  Preconditions.checkArgument(templateValues.size() <= templateKeys.size());
  this.registry=registry;
  this.templateKeys=templateKeys;
  this.templateValues=templateValues;
  TemplateTypeMapReplacer replacer=new TemplateTypeMapReplacer(registry,this);
  ImmutableList.Builder<JSType> builder=ImmutableList.builder();
  for (int nValues=this.templateValues.size(), i=0; i < nValues; i++) {
    TemplateType templateKey=this.templateKeys.get(i);
    replacer.setKeyType(templateKey);
    JSType templateValue=this.templateValues.get(i);
    builder.add(templateValue.visit(replacer));
  }
  this.resolvedTemplateValues=builder.build();
}
