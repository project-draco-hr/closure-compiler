{
  Preconditions.checkNotNull(templateKeys);
  Preconditions.checkNotNull(templateValues);
  Preconditions.checkArgument(templateValues.size() <= templateKeys.size());
  this.registry=registry;
  this.templateKeys=templateKeys;
  this.templateValues=templateValues;
  TemplateTypeMapReplacer replacer=new TemplateTypeMapReplacer(registry,this);
  int nValues=this.templateValues.size();
  JSType[] resolvedValues=null;
  if (nValues > 0) {
    resolvedValues=new JSType[nValues];
    for (int i=0; i < nValues; i++) {
      TemplateType templateKey=this.templateKeys.get(i);
      replacer.setKeyType(templateKey);
      JSType templateValue=this.templateValues.get(i);
      resolvedValues[i]=templateValue.visit(replacer);
    }
  }
  this.resolvedTemplateValues=resolvedValues;
}
