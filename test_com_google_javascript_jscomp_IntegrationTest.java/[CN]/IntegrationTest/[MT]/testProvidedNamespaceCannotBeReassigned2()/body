{
  CompilerOptions options=createCompilerOptions();
  options.setClosurePass(true);
  options.setInlineConstantVars(true);
  options.setCollapseProperties(true);
  options.setWarningLevel(DiagnosticGroups.ACCESS_CONTROLS,CheckLevel.ERROR);
  test(options,LINE_JOINER.join("var goog = {};","goog.provide('foo.bar');","foo.bar = function() {};","function f() { foo.bar = {};}"),ProcessClosurePrimitives.DEFINITION_NOT_IN_GLOBAL_SCOPE);
}
