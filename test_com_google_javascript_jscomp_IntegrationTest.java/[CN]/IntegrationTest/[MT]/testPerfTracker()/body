{
  ByteArrayOutputStream output=new ByteArrayOutputStream();
  PrintStream outstream=new PrintStream(output);
  Compiler compiler=new Compiler(outstream);
  CompilerOptions options=new CompilerOptions();
  List<SourceFile> inputs=Lists.newArrayList();
  List<SourceFile> externs=Lists.newArrayList();
  options.setTracerMode(TracerMode.ALL);
  inputs.add(SourceFile.fromCode("foo","function fun(){}"));
  compiler.compile(externs,inputs,options);
  outstream.flush();
  outstream.close();
  Pattern p=Pattern.compile(".*Summary:\npass,runtime,runs,changingRuns,reduction,gzReduction" + ".*TOTAL:" + "\nRuntime\\(ms\\): [0-9]+"+ "\n#Runs: [0-9]+"+ "\n#Changing runs: [0-9]+"+ "\n#Loopable runs: [0-9]+"+ "\n#Changing loopable runs: [0-9]+"+ "\nEstimated Reduction\\(bytes\\): [0-9]+"+ "\nEstimated GzReduction\\(bytes\\): [0-9]+"+ "\nEstimated Size\\(bytes\\): [0-9]+"+ "\nEstimated GzSize\\(bytes\\): [0-9]+"+ "\nTotal Size\\(bytes\\): -?[0-9]+"+ "\nTotal GzSize\\(bytes\\): -?[0-9]+"+ "\n\nLog:\n"+ "pass,runtime,runs,changingRuns,reduction,gzReduction,size,gzSize.*",Pattern.DOTALL);
  assertTrue(p.matcher(output.toString()).matches());
}
