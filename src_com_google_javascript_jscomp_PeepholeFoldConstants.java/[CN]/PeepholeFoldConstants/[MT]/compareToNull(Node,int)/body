{
  boolean valueUndefined=NodeUtil.isUndefined(value);
  boolean valueNull=(Token.NULL == value.getType());
  boolean equivalent=valueUndefined || valueNull;
switch (op) {
case Token.EQ:
    return equivalent;
case Token.NE:
  return !equivalent;
case Token.SHEQ:
return valueNull;
case Token.SHNE:
return !valueNull;
default :
throw new IllegalStateException("unexpected.");
}
}
