{
  String[] argStrings=args.toArray(new String[]{});
  CommandLineRunner runner=null;
  try {
    runner=new CommandLineRunner(argStrings);
  }
 catch (  CmdLineException e) {
    throw new RuntimeException(e);
  }
  Compiler compiler=runner.createCompiler();
  lastCompiler=compiler;
  JSSourceFile[] inputs=new JSSourceFile[original.length];
  for (int i=0; i < original.length; i++) {
    inputs[i]=JSSourceFile.fromCode("input" + i,original[i]);
  }
  CompilerOptions options=runner.createOptions();
  try {
    runner.setRunOptions(options);
  }
 catch (  AbstractCommandLineRunner.FlagUsageException e) {
    fail("Unexpected exception " + e);
  }
catch (  IOException e) {
    assert(false);
  }
  compiler.compile(externs,CompilerTestCase.createModuleChain(original),options);
  return compiler;
}
